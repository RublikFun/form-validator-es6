'use strict';

var Answer = function Answer(container) {
	this.ranges = {};
	this.required = {};
	this.restrictions = {};
	this.container = container;
	this.value = {};
	this.validations = [];
	this.init();
};
Answer.prototype = {
	init: function init() {
		this.setRanges();
		this.setRequired();
		this.setRestrictions();
		this.formatValue();
		this.setChange(this.container);
	},
	setValidation: function setValidation(arg) {
		if (typeof arg === 'boolean') {
			this.validations.push(arg);
			return;
		}
		this.validations = [];
	},
	getValidation: function getValidation() {
		var i,
		    allAreValid = true;
		for (i = 0; i < this.validations.length; i++) {
			if (this.validations[i] === false) {
				allAreValid = false;
				break;
			}
		}
		return allAreValid;
	},
	setRanges: function setRanges() {
		var self = this;
		$(this.container).each(function () {
			self.ranges[$(this).data('field')] = {
				max: $(this).data('max') || false,
				min: $(this).data('min') || false
			};
		});
	},
	setRequired: function setRequired() {
		var self = this;
		$(this.container).each(function () {
			if ($(this).data('required') === false) {
				self.required[$(this).data('field')] = false;
			} else {
				self.required[$(this).data('field')] = true;
			}
		});
	},
	setRestrictions: function setRestrictions() {
		var self = this;
		$(this.container).each(function () {
			if ($(this).data('numeric') === true) {
				self.restrictions[$(this).data('field')] = 'numeric';
			} else {
				self.restrictions[$(this).data('field')] = false;
			}
		});
	},
	setChange: function setChange(els) {
		var self = this;
		els.on('change', function () {
			self.callbackCheck();
			self.formatValue();
		});
	},
	setCallbackChange: function setCallbackChange(els) {
		var self = this,
		    elementsToBind;
		elementsToBind = els.filter(function () {
			if (self.hasField(this)) {
				return this;
			}
		});
		$(elementsToBind).on('change', function () {
			self.formatValue();
		});
	},
	unsetChange: function unsetChange(els) {
		var self = this,
		    elementsToBind;
		elementsToBind = els.filter(function () {
			if (self.hasField(this)) {
				return this;
			}
		});
		$(elementsToBind).off('change');
	},
	callbackCheck: function callbackCheck() {
		var self = this;
		$(this.container).each(function () {
			self.checkForCallback($(this));
		});
	},

	formatValue: function formatValue(shouldReset) {
		var self = this,
		    reset = shouldReset || false;
		$(this.container).each(function () {
			if (reset) {
				self.clearValue($(this));
			}
			self.trackValue($(this));
		});
	},
	trackValue: function trackValue(el) {
		var key = el.data('grouping');
		if (key !== undefined) {
			this.trackDimensionalValue(el, key);
		} else {
			$.extend(this.value, this.formattedValue(el));
		}
	},
	trackDimensionalValue: function trackDimensionalValue(el, key) {
		this.value[key] = this.value[key] === undefined ? {} : this.value[key];
		$.extend(this.value[key], this.formattedValue(el));
	},
	formattedValue: function formattedValue(el) {
		var val = {};
		var key = el.data('field');
		val[key] = this.getDefault(el);
		if (this.hasValue(el)) {
			val[key] = this.getValueOrDefault(el);
			this.removeError(key);
			return val;
		}
		if (this.shouldOverwrite(el)) {
			val[key] = this.getDefault(el);
			return val;
		}
		return;
	},
	getValueOrDefault: function getValueOrDefault(el) {
		var value = el.val();
		if (value === '') {
			value = this.getDefault(el);
		}
		return value;
	},
	getDefault: function getDefault(el) {
		var value = '';
		if (el.data('default') !== undefined) {
			value = el.data('default');
		}
		return value;
	},
	deleteValue: function deleteValue(el) {
		var self = this;
		$(el).each(function () {
			delete self.value[$(this).data('field')];
		});
	},
	checkForCallback: function checkForCallback(el) {
		if (this.hasValue(el)) {
			return this.revealCallback(el);
		}

		return this.revertCallback(el);
	},
	revealCallback: function revealCallback(el) {
		var callbackElement = $('.' + el.data('callback')),
		    self = this;
		if (callbackElement.length > 0) {
			callbackElement.each(function () {
				if (self.hasField(this)) {
					self.addAnswer($(this));
				}
			});
			callbackElement.addClass('active').addClass('js-active');
		}
	},
	revertCallback: function revertCallback(el) {
		var callbackElement = $('.' + el.data('callback'));
		if (callbackElement.length > 0) {
			this.clearValue(callbackElement);
			this.removeAnswer(callbackElement);
			callbackElement.removeClass('active').removeClass('js-active');
		}
	},

	hasValue: function hasValue(container) {
		return this.isValidInput(container) || this.isValidCheckbox(container) || this.isValidSelect(container);
	},
	shouldOverwrite: function shouldOverwrite(el) {
		return this.isDuplicate(el) && this.isFirst(el) || !this.isDuplicate(el);
	},
	isDuplicate: function isUnique(el) {
		return $('[data-field="' + el.data('field') + '"]').length > 1;
	},
	isFirst: function isFirst(el) {
		return $('[data-field="' + el.data('field') + '"]').index(el) === 0;
	},
	clearValue: function clearValue(el) {
		if (this.isValidInput(el)) {
			el.val('');
		}
		el.prop('checked', false);
		el.find('option').prop('selected', false);
	},
	hasField: function hasField(el) {
		if ($(el).data('field')) {
			return true;
		}
		return false;
	},

	addError: function addError(answer) {
		$('[data-field="' + answer + '"]').addClass('js-error').addClass('error');
	},
	removeError: function removeError(answer) {
		$('[data-field="' + answer + '"]').removeClass('js-error').removeClass('error');
	},

	isValid: function isValid() {
		this.setValidation();
		for (var answer in this.value) {
			var value = this.value[answer];
			if (typeof value === 'object') {
				var validity = this.checkGroupValidity(value);
				this.setValidation(validity);
			} else {
				var validity = this.checkIndividualValidity(answer, value);
				this.setValidation(validity);
			}
		}
		return this.getValidation();
	},
	checkGroupValidity: function checkGroupValidity(group) {
		var groupIsValid = true;
		for (var subAnswer in group) {
			groupIsValid = this.checkIndividualValidity(subAnswer, group[subAnswer]);
		}
		return groupIsValid;
	},
	checkIndividualValidity: function checkIndividualValidity(key, value) {
		var fieldIsValid = this.validatePresence(key, value) && this.validateContent(key, value);
		if (fieldIsValid) {
			this.removeError(key);
		}
		return fieldIsValid;
	},

	validatePresence: function validatePresence(key, value) {
		if (!this.isPresent(key, value)) {
			this.addError(key);
			return false;
		}
		return true;
	},
	validateContent: function validateContent(key, value) {
		if (this.isNumericallyValid(key, value) && this.isInRange(key, value)) {
			return true;
		}
		this.addError(key);
		return false;
	},

	isValidInput: function isValidInput(el) {
		if (el.attr('type') === 'text') {
			return true;
		}
		return false;
	},
	isValidCheckbox: function isValidCheckbox(el) {
		if (el.prop('checked')) {
			return true;
		}
		return false;
	},
	isValidSelect: function isValidSelect(el) {
		if (el[0].tagName === 'SELECT' && el.val()) {
			return true;
		}
		return false;
	},
	isNumericallyValid: function isNumericallyValid(key, value) {
		var hasRestrictions = this.restrictions !== undefined;
		if (!hasRestrictions) {
			return true;
		}
		if (this.restrictions[key] === 'numeric') {
			return this.isNumeric(value);
		}
		return true;
	},
	isNumeric: function isNumeric(value) {
		if (isNaN(Number(value))) {
			return false;
		}
		return true;
	},
	isAbove: function isAbove(key, value) {
		var min = this.ranges[key].min;
		if (!min) {
			return true;
		}
		return this.isNumeric(value) && value >= min;
	},
	isBelow: function isBelow(key, value) {
		var max = this.ranges[key].max;
		if (!max) {
			return true;
		}
		return this.isNumeric(value) && value <= max;
	},

	isPresent: function isPresent(key, value) {
		return this.required[key] === false || value !== '';
	},
	isInRange: function isInRange(key, value) {
		if (this.ranges[key] === undefined) {
			return true;
		}
		return this.isAbove(key, value) && this.isBelow(key, value);
	},

	addAnswer: function addAnswer(container) {
		this.container = this.container.add(container);
		this.setCallbackChange(container);
		this.setRanges();
		this.setRequired();
	},
	removeAnswer: function removeAnswer(container) {
		this.container = this.container.not(container);
		this.unsetChange(container);
		this.setRanges();
		this.required = {};
		this.setRequired();
		this.deleteValue(container);
	}

};
'use strict';

var Answers = function Answers() {
	this.privateValue = {};
	this.all = [];
};
Answers.prototype = {
	createAnswer: function createAnswer(dom) {
		var answer = new Answer(dom);
		this.all.push(answer);
		return answer;
	},
	getRecord: function getRecord() {
		this.report();
		return this.privateValue;
	},
	setRecord: function setRecord(arg) {
		this.privateValue = arg;
	},
	validateAll: function validateAll() {
		for (var i = 0; i < this.all.length; i++) {
			this.all[i].isValid();
		}
	},
	report: function report() {
		for (var i = 0; i < this.all.length; i++) {
			$.extend(this.privateValue, this.all[i].value);
		}
		return this.privateValue;
	},
	resetAll: function resetAll() {
		for (var i = 0; i < this.all.length; i++) {
			this.all[i].formatValue(true);
		}
		this.report();
	}
};
'use strict';

var Scene = function Scene(el) {
	this.container = el;
	this.bound = false;
	return this;
};
Scene.prototype = {
	setCallback: function setCallback() {
		var callback = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];
		var args = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];

		this.callback = callback;
		this.args = args;
		return this;
	},
	setScript: function setScript(script) {
		this.script = script || undefined;
		return this;
	},
	setButton: function setButton() {
		var klass = arguments.length <= 0 || arguments[0] === undefined ? '.js-button' : arguments[0];

		this.button = this.findButton(klass);
		return this;
	},
	setAnswer: function setAnswer() {
		var klass = arguments.length <= 0 || arguments[0] === undefined ? '.js-answer' : arguments[0];

		this.answerClass = klass;
		return this;
	},
	bindClicks: function bindClicks() {
		var self = this;
		this.button.each(function () {
			self.bindClick($(this));
		});
	},
	init: function init(script) {
		var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

		this.setCallback(opts.callback, opts.callbackArgs).setScript(script).setButton(opts.button).setAnswer(opts.answer).createAnswers().bindClicks();
	},
	createAnswers: function createAnswers() {
		if (this.script === undefined) {
			this.answer = new Answer(this.container.find(this.answerClass));
			return this;
		}
		var answerEl = this.container.find(this.answerClass);
		this.answer = this.script.answers.createAnswer(answerEl);
		return this;
	},
	findButton: function findButton(buttonClass) {
		if (buttonClass !== undefined) {
			return this.container.find(buttonClass);
		}
		return this.container.find('.js-button');
	},
	show: function show() {
		this.container.addClass('active').addClass('js-active');
	},
	hide: function hide() {
		this.container.removeClass('active').removeClass('js-active');
	},
	shake: function shake() {
		this.container.addClass('js-error').addClass('error');
	},
	unshake: function unshake() {
		this.container.removeClass('js-error').removeClass('error');
	},
	handleCallback: function handleCallback() {
		var args = typeof this.args === 'function' ? this.args() : this.args;

		if (this.callback) {
			this.callback(args);
		}
	},
	finalize: function finalize() {
		this.unshake();
		if (this.script !== undefined) {
			this.script.next();
		}
		this.handleCallback();
		return true;
	},
	validate: function validate() {
		this.answer.isValid();
		if ($(this.answer.container).hasClass('js-error')) {
			this.shake();
			return false;
		}
		this.finalize();
	},
	bindClick: function bindClick(el) {
		var self = this;
		el.click(function () {
			self.validate();
		});
		this.bound = true;
	},
	destroy: function destroy() {
		this.hide();
		delete this.answers;
		delete this;
	}
};
'use strict';

var Storyboarder = function Storyboarder(container) {
	var auto = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];

	this.container = container || $('.js-storyboard');
	this.scenes = [];
	this.current = 0;
	this.answers = new Answers();
	if (auto) {
		this.init();
	}
	return this;
};
Storyboarder.prototype = {
	report: function report() {
		return this.answers.report();
	},
	setFinished: function setFinished(onFinished, args) {
		this.onFinished = onFinished || false;
		this.args = args || false;
		return this;
	},
	setScene: function setScene(klass) {
		this.sceneClass = klass || '.js-scene';
		return this;
	},
	setButton: function setButton(klass) {
		this.buttonClass = klass || '.js-button';
		return this;
	},
	setAnswer: function setAnswer(klass) {
		this.answerClass = klass || '.js-answer';
		return this;
	},
	makeScenes: function makeScenes(opts) {
		if (this.answers !== undefined) {
			opts.answers = this.answers;
		}
		var self = this;
		this.container.find(this.sceneClass).each(function () {
			self.addScene($(this), opts);
		});
		return this;
	},
	init: function init() {
		var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		this.setFinished(opts.onFinished, opts.onFinishedArgs).setScene(opts.scene).setButton(opts.button).setAnswer(opts.answer).makeScenes(opts).start();
	},

	addScene: function addScene(el, opts) {
		var scene = new Scene(el);
		scene.init(this, opts);
		this.scenes.push(scene);
	},
	removeScene: function removeScene() {
		this.scenes.pop().destroy();
	},

	addAt: function addAt(index, el, opts) {
		var scene = new Scene(el);
		scene.init(this, opts);
		this.scenes.splice(index, 0, scene);
	},
	removeAt: function removeAt(index) {
		this.scenes.splice(index, 1)[0].destroy();
	},

	previous: function previous() {
		this.scenes[this.current].hide();
		if (this.current > 0) {
			this.untick();
			return true;
		}
		this.start();
	},
	next: function next() {
		this.scenes[this.current].hide();
		if (this.scenes.length - 1 > this.current) {
			this.tick();
			return true;
		}
		this.finish();
	},

	tick: function tick() {
		this.current += 1;
		this.scenes[this.current].show();
	},
	untick: function untick() {
		this.current -= 1;
		this.scenes[this.current].show();
	},

	handleFunction: function handleFunction(funct, args) {
		funct.call(this, args);
	},

	handleArray: function handleArray() {
		this.formatArgsArray();
		for (var i = 0; i < this.onFinished.length; i++) {
			this.onFinished[i].call(this, this.args[i]);
		}
	},
	formatArgsArray: function formatArgsArray() {
		if (typeof this.args === 'object') {
			return;
		}
		this.args = new Array(this.args);
	},
	finish: function finish() {
		this.container.addClass('finished');
		if (this.onFinished) {
			if (typeof this.onFinished === 'function') {
				this.handleFunction(this.onFinished, this.args);
				return;
			}
			this.handleArray();
		}
	},
	start: function start() {
		this.current = 0;
		this.scenes[this.current].show();
		this.container.addClass('started');
	},
	restart: function restart() {
		this.answers.resetAll();
		this.container.removeClass('finished');
		this.start();
	},
	addCallbackToScene: function addCallbackToScene(sceneIdx, callback, arg) {
		var scene = this.scenes[sceneIdx];
		scene.args = arg;
		scene.callback = callback.bind(scene);
	}
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuc3dlci5qcyIsImFuc3dlcnMuanMiLCJzY2VuZS5qcyIsInN0b3J5Ym9hcmRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsSUFBSSxNQUFNLEdBQUcsU0FBVCxNQUFNLENBQVksU0FBUyxFQUFDO0FBQy9CLEtBQUksQ0FBQyxNQUFNLEdBQVEsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxRQUFRLEdBQU0sRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxZQUFZLEdBQUUsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxTQUFTLEdBQUssU0FBUyxDQUFDO0FBQzdCLEtBQUksQ0FBQyxLQUFLLEdBQVMsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztDQUNaLENBQUM7QUFDRixNQUFNLENBQUMsU0FBUyxHQUFHO0FBQ2xCLEtBQUksRUFBRSxTQUFTLElBQUksR0FBRTtBQUNwQixNQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDakIsTUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ25CLE1BQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN2QixNQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDbkIsTUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7RUFDL0I7QUFDRCxjQUFhLEVBQUUsdUJBQVMsR0FBRyxFQUFDO0FBQzNCLE1BQUcsT0FBTyxHQUFHLEtBQUssU0FBUyxFQUFDO0FBQzNCLE9BQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLFVBQU87R0FDUDtBQUNELE1BQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0VBQ3RCO0FBQ0QsY0FBYSxFQUFFLHlCQUFVO0FBQ3hCLE1BQUksQ0FBQztNQUFFLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDMUIs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RSxVQUFVLENBQUUsQ0FBQztBQUN6QyxNQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7RUFDYjtBQUNELG1CQUFrQixFQUFFLDRCQUFVLFFBQVEsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFHO0FBQ3ZELE1BQUksS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUUsUUFBUSxDQUFFLENBQUM7QUFDcEMsT0FBSyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7QUFDakIsT0FBSyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFFLEtBQUssQ0FBRSxDQUFDO0VBQ3hDO0NBQ0QsQ0FBQyIsImZpbGUiOiJzdG9yeWJvYXJkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBBbnN3ZXIgPSBmdW5jdGlvbihjb250YWluZXIpe1xuXHR0aGlzLnJhbmdlcyAgICAgID0ge307XG5cdHRoaXMucmVxdWlyZWQgICAgPSB7fTtcblx0dGhpcy5yZXN0cmljdGlvbnM9IHt9O1xuXHR0aGlzLmNvbnRhaW5lciAgID0gY29udGFpbmVyO1xuXHR0aGlzLnZhbHVlICAgICAgID0ge307XG5cdHRoaXMudmFsaWRhdGlvbnMgPSBbXTtcblx0dGhpcy5pbml0KCk7XG59O1xuQW5zd2VyLnByb3RvdHlwZSA9IHtcblx0aW5pdDogZnVuY3Rpb24gaW5pdCgpe1xuXHRcdHRoaXMuc2V0UmFuZ2VzKCk7XG5cdFx0dGhpcy5zZXRSZXF1aXJlZCgpO1xuXHRcdHRoaXMuc2V0UmVzdHJpY3Rpb25zKCk7XG5cdFx0dGhpcy5mb3JtYXRWYWx1ZSgpO1xuXHRcdHRoaXMuc2V0Q2hhbmdlKHRoaXMuY29udGFpbmVyKTtcblx0fSxcblx0c2V0VmFsaWRhdGlvbjogZnVuY3Rpb24oYXJnKXtcblx0XHRpZih0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpe1xuXHRcdFx0dGhpcy52YWxpZGF0aW9ucy5wdXNoKGFyZyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMudmFsaWRhdGlvbnMgPSBbXTtcblx0fSxcblx0Z2V0VmFsaWRhdGlvbjogZnVuY3Rpb24oKXtcblx0XHR2YXIgaSwgYWxsQXJlVmFsaWQgPSB0cnVlO1xuXHRcdGZvcihpID0gMDsgaSA8IHRoaXMudmFsaWRhdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKHRoaXMudmFsaWRhdGlvbnNbaV0gPT09IGZhbHNlKSB7XG5cdFx0XHRcdGFsbEFyZVZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gYWxsQXJlVmFsaWQ7XG5cdH0sXG5cdHNldFJhbmdlczogZnVuY3Rpb24gc2V0UmFuZ2VzKCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdCQodGhpcy5jb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHNlbGYucmFuZ2VzWyQodGhpcykuZGF0YSgnZmllbGQnKV0gPSB7XG5cdFx0XHRcdG1heDogJCh0aGlzKS5kYXRhKCdtYXgnKSB8fCBmYWxzZSxcblx0XHRcdFx0bWluOiAkKHRoaXMpLmRhdGEoJ21pbicpIHx8IGZhbHNlXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9LFxuXHRzZXRSZXF1aXJlZDogZnVuY3Rpb24gc2V0UmVxdWlyZWQoKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0JCh0aGlzLmNvbnRhaW5lcikuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0aWYoJCh0aGlzKS5kYXRhKCdyZXF1aXJlZCcpID09PSBmYWxzZSApe1xuXHRcdFx0XHRzZWxmLnJlcXVpcmVkWyQodGhpcykuZGF0YSgnZmllbGQnKV0gPSBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYucmVxdWlyZWRbJCh0aGlzKS5kYXRhKCdmaWVsZCcpXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdHNldFJlc3RyaWN0aW9uczogZnVuY3Rpb24gc2V0UmVzdHJpY3Rpb25zKCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdCQodGhpcy5jb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdGlmKCQodGhpcykuZGF0YSgnbnVtZXJpYycpID09PSB0cnVlICl7XG5cdFx0XHRcdHNlbGYucmVzdHJpY3Rpb25zWyQodGhpcykuZGF0YSgnZmllbGQnKV0gPSAnbnVtZXJpYyc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLnJlc3RyaWN0aW9uc1skKHRoaXMpLmRhdGEoJ2ZpZWxkJyldID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdHNldENoYW5nZTogZnVuY3Rpb24gc2V0Q2hhbmdlKGVscyl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdGVscy5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGYuY2FsbGJhY2tDaGVjaygpO1xuXHRcdFx0XHRzZWxmLmZvcm1hdFZhbHVlKCk7XG5cdFx0XHR9KTtcblx0fSxcblx0c2V0Q2FsbGJhY2tDaGFuZ2U6IGZ1bmN0aW9uIHNldENhbGxiYWNrQ2hhbmdlKGVscyl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzLCBlbGVtZW50c1RvQmluZDtcblx0XHRlbGVtZW50c1RvQmluZCA9IGVscy5maWx0ZXIoZnVuY3Rpb24oKXtcblx0XHRcdGlmKHNlbGYuaGFzRmllbGQodGhpcykpe1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKGVsZW1lbnRzVG9CaW5kKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGYuZm9ybWF0VmFsdWUoKTtcblx0XHRcdH0pO1xuXHR9LFxuXHR1bnNldENoYW5nZTogZnVuY3Rpb24gdW5zZXRDaGFuZ2UoZWxzKXtcblx0XHR2YXIgc2VsZiA9IHRoaXMsIGVsZW1lbnRzVG9CaW5kO1xuXHRcdGVsZW1lbnRzVG9CaW5kID0gZWxzLmZpbHRlcihmdW5jdGlvbigpe1xuXHRcdFx0aWYoc2VsZi5oYXNGaWVsZCh0aGlzKSl7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCQoZWxlbWVudHNUb0JpbmQpLm9mZignY2hhbmdlJyk7XG5cdH0sXG5cdGNhbGxiYWNrQ2hlY2s6IGZ1bmN0aW9uIGNhbGxiYWNrQ2hlY2soKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0JCh0aGlzLmNvbnRhaW5lcikuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0c2VsZi5jaGVja0ZvckNhbGxiYWNrKCQodGhpcykpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGZvcm1hdFZhbHVlOiBmdW5jdGlvbiBmb3JtYXRWYWx1ZShzaG91bGRSZXNldCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzLCByZXNldCA9IHNob3VsZFJlc2V0IHx8IGZhbHNlO1xuXHRcdCQodGhpcy5jb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdGlmKHJlc2V0KXtcblx0XHRcdFx0c2VsZi5jbGVhclZhbHVlKCQodGhpcykpO1xuXHRcdFx0fVxuXHRcdFx0c2VsZi50cmFja1ZhbHVlKCAkKHRoaXMpICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyYWNrVmFsdWU6IGZ1bmN0aW9uIHRyYWNrVmFsdWUoZWwpe1xuXHRcdHZhciBrZXkgPSBlbC5kYXRhKCdncm91cGluZycpO1xuXHRcdGlmKGtleSAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdHRoaXMudHJhY2tEaW1lbnNpb25hbFZhbHVlKGVsLCBrZXkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkLmV4dGVuZCggdGhpcy52YWx1ZSwgdGhpcy5mb3JtYXR0ZWRWYWx1ZShlbCkgKTtcblx0XHR9XG5cdH0sXG5cdHRyYWNrRGltZW5zaW9uYWxWYWx1ZTogZnVuY3Rpb24gdHJhY2tEaW1lbnNpb25hbFZhbHVlKGVsLCBrZXkpe1xuXHRcdHRoaXMudmFsdWVba2V5XSA9IHRoaXMudmFsdWVba2V5XSA9PT0gdW5kZWZpbmVkID8ge30gOiB0aGlzLnZhbHVlW2tleV07XG5cdFx0JC5leHRlbmQoIHRoaXMudmFsdWVba2V5XSwgdGhpcy5mb3JtYXR0ZWRWYWx1ZShlbCkgKTtcblx0fSxcblx0Zm9ybWF0dGVkVmFsdWU6IGZ1bmN0aW9uIGZvcm1hdHRlZFZhbHVlKGVsKXtcblx0XHR2YXIgdmFsID0ge307XG5cdFx0dmFyIGtleSA9IGVsLmRhdGEoICdmaWVsZCcgKTtcblx0XHRcdFx0dmFsWyBrZXkgXSA9IHRoaXMuZ2V0RGVmYXVsdCggZWwgKTtcblx0XHRpZiggdGhpcy5oYXNWYWx1ZShlbCkgKXtcblx0XHRcdHZhbFsga2V5IF0gPSB0aGlzLmdldFZhbHVlT3JEZWZhdWx0KCBlbCApO1xuXHRcdFx0dGhpcy5yZW1vdmVFcnJvcigga2V5ICk7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblx0XHRpZiggdGhpcy5zaG91bGRPdmVyd3JpdGUoIGVsICkgKXtcblx0XHRcdHZhbFsga2V5IF0gPSB0aGlzLmdldERlZmF1bHQoIGVsICk7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH0sXG5cdGdldFZhbHVlT3JEZWZhdWx0OiBmdW5jdGlvbiBnZXRWYWx1ZU9yRGVmYXVsdCggZWwgKXtcblx0XHR2YXIgdmFsdWUgPSBlbC52YWwoKTtcblx0XHRpZiggdmFsdWUgPT09ICcnICl7XG5cdFx0XHR2YWx1ZSA9IHRoaXMuZ2V0RGVmYXVsdCggZWwgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRnZXREZWZhdWx0OiBmdW5jdGlvbiBnZXREZWZhdWx0KCBlbCApe1xuXHRcdHZhciB2YWx1ZSA9ICcnO1xuXHRcdGlmKCBlbC5kYXRhKCdkZWZhdWx0JykgIT09IHVuZGVmaW5lZCApe1xuXHRcdFx0dmFsdWUgPSBlbC5kYXRhKCdkZWZhdWx0Jyk7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcblx0ZGVsZXRlVmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZVZhbHVlKCBlbCApe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHQkKCBlbCApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHNlbGYudmFsdWVbICQoIHRoaXMgKS5kYXRhKCAnZmllbGQnICkgXTtcblx0XHR9ICk7XG5cdH0sXG5cdGNoZWNrRm9yQ2FsbGJhY2s6IGZ1bmN0aW9uIGNoZWNrRm9yQ2FsbGJhY2soIGVsICl7XG5cdFx0aWYgKCB0aGlzLmhhc1ZhbHVlKCBlbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucmV2ZWFsQ2FsbGJhY2soIGVsICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucmV2ZXJ0Q2FsbGJhY2soIGVsICk7XG5cdH0sXG5cdHJldmVhbENhbGxiYWNrOiBmdW5jdGlvbiByZXZlYWxDYWxsYmFjayggZWwgKXtcblx0XHR2YXIgY2FsbGJhY2tFbGVtZW50ID0gJCggJy4nICsgZWwuZGF0YSggJ2NhbGxiYWNrJyApICksXG5cdFx0c2VsZiA9IHRoaXM7XG5cdFx0aWYoIGNhbGxiYWNrRWxlbWVudC5sZW5ndGggPiAwICl7XG5cdFx0XHRjYWxsYmFja0VsZW1lbnQuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKCBzZWxmLmhhc0ZpZWxkKCB0aGlzICkgKXtcblx0XHRcdFx0XHRzZWxmLmFkZEFuc3dlciggJCggdGhpcyApICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHRcdGNhbGxiYWNrRWxlbWVudC5hZGRDbGFzcyggJ2FjdGl2ZScgKS5hZGRDbGFzcyggJ2pzLWFjdGl2ZScgKTtcblx0XHR9XG5cdH0sXG5cdHJldmVydENhbGxiYWNrOiBmdW5jdGlvbiByZXZlcnRDYWxsYmFjayggZWwgKXtcblx0XHR2YXIgY2FsbGJhY2tFbGVtZW50ID0gJCggJy4nICsgZWwuZGF0YSggJ2NhbGxiYWNrJyApICk7XG5cdFx0aWYoIGNhbGxiYWNrRWxlbWVudC5sZW5ndGggPiAwICl7XG5cdFx0XHR0aGlzLmNsZWFyVmFsdWUoIGNhbGxiYWNrRWxlbWVudCApO1xuXHRcdFx0dGhpcy5yZW1vdmVBbnN3ZXIoIGNhbGxiYWNrRWxlbWVudCApO1xuXHRcdFx0Y2FsbGJhY2tFbGVtZW50LnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApLnJlbW92ZUNsYXNzKCAnanMtYWN0aXZlJyApO1xuXHRcdH1cblx0fSxcblxuXG5cdGhhc1ZhbHVlOiBmdW5jdGlvbiBoYXNWYWx1ZShjb250YWluZXIpe1xuXHRcdHJldHVybiB0aGlzLmlzVmFsaWRJbnB1dChjb250YWluZXIpIHx8XG5cdFx0XHRcdFx0IHRoaXMuaXNWYWxpZENoZWNrYm94KGNvbnRhaW5lcikgfHxcblx0XHRcdFx0XHQgdGhpcy5pc1ZhbGlkU2VsZWN0KGNvbnRhaW5lcik7XG5cdH0sXG5cdHNob3VsZE92ZXJ3cml0ZTogZnVuY3Rpb24gc2hvdWxkT3ZlcndyaXRlKGVsKXtcblx0XHRyZXR1cm4gKCB0aGlzLmlzRHVwbGljYXRlKGVsKSAmJlxuXHRcdFx0XHRcdFx0IHRoaXMuaXNGaXJzdChlbCkgKSB8fFxuXHRcdFx0XHRcdFx0IXRoaXMuaXNEdXBsaWNhdGUoZWwpO1xuXHR9LFxuXHRpc0R1cGxpY2F0ZTogZnVuY3Rpb24gaXNVbmlxdWUoZWwpe1xuXHRcdHJldHVybiAkKCdbZGF0YS1maWVsZD1cIicrZWwuZGF0YSgnZmllbGQnKSsnXCJdJykubGVuZ3RoID4gMTtcblx0fSxcblx0aXNGaXJzdDogZnVuY3Rpb24gaXNGaXJzdChlbCl7XG5cdFx0cmV0dXJuICQoJ1tkYXRhLWZpZWxkPVwiJytlbC5kYXRhKCdmaWVsZCcpKydcIl0nKS5pbmRleChlbCkgPT09IDA7XG5cdH0sXG5cdGNsZWFyVmFsdWU6IGZ1bmN0aW9uIGNsZWFyVmFsdWUoZWwpe1xuXHRcdGlmKCB0aGlzLmlzVmFsaWRJbnB1dChlbCkgKXtcblx0XHRcdGVsLnZhbCgnJyk7XG5cdFx0fVxuXHRcdGVsLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0ZWwuZmluZCgnb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdH0sXG5cdGhhc0ZpZWxkOiBmdW5jdGlvbiBoYXNGaWVsZCggZWwgKXtcblx0XHRpZiAoJChlbCkuZGF0YSgnZmllbGQnKSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRhZGRFcnJvcjogZnVuY3Rpb24gYWRkRXJyb3IoYW5zd2VyKXtcblx0XHQkKCdbZGF0YS1maWVsZD1cIicrYW5zd2VyKydcIl0nKS5hZGRDbGFzcygnanMtZXJyb3InKS5hZGRDbGFzcygnZXJyb3InKTtcblx0fSxcblx0cmVtb3ZlRXJyb3I6IGZ1bmN0aW9uIHJlbW92ZUVycm9yKGFuc3dlcil7XG5cdFx0JCgnW2RhdGEtZmllbGQ9XCInK2Fuc3dlcisnXCJdJykucmVtb3ZlQ2xhc3MoJ2pzLWVycm9yJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG5cdH0sXG5cblxuXHRpc1ZhbGlkOiBmdW5jdGlvbiBpc1ZhbGlkKCl7XG5cdFx0dGhpcy5zZXRWYWxpZGF0aW9uKCk7XG5cdFx0Zm9yKCB2YXIgYW5zd2VyIGluIHRoaXMudmFsdWUgKXtcblx0XHRcdHZhciB2YWx1ZSA9IHRoaXMudmFsdWVbYW5zd2VyXTtcblx0XHRcdGlmKCB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICl7XG5cdFx0XHRcdGxldCB2YWxpZGl0eSA9IHRoaXMuY2hlY2tHcm91cFZhbGlkaXR5KCB2YWx1ZSApO1xuXHRcdFx0XHR0aGlzLnNldFZhbGlkYXRpb24oIHZhbGlkaXR5ICk7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdGxldCB2YWxpZGl0eSA9IHRoaXMuY2hlY2tJbmRpdmlkdWFsVmFsaWRpdHkoIGFuc3dlciwgdmFsdWUgKTtcblx0XHRcdFx0dGhpcy5zZXRWYWxpZGF0aW9uKCB2YWxpZGl0eSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5nZXRWYWxpZGF0aW9uKCk7XG5cdH0sXG5cdGNoZWNrR3JvdXBWYWxpZGl0eTogZnVuY3Rpb24gY2hlY2tHcm91cFZhbGlkaXR5KGdyb3VwKXtcblx0XHR2YXIgZ3JvdXBJc1ZhbGlkID0gdHJ1ZTtcblx0XHRmb3IodmFyIHN1YkFuc3dlciBpbiBncm91cCApe1xuXHRcdFx0Z3JvdXBJc1ZhbGlkID0gdGhpcy5jaGVja0luZGl2aWR1YWxWYWxpZGl0eShzdWJBbnN3ZXIsIGdyb3VwW3N1YkFuc3dlcl0pO1xuXHRcdH1cblx0XHRyZXR1cm4gZ3JvdXBJc1ZhbGlkO1xuXHR9LFxuXHRjaGVja0luZGl2aWR1YWxWYWxpZGl0eTogZnVuY3Rpb24gY2hlY2tJbmRpdmlkdWFsVmFsaWRpdHkoa2V5LCB2YWx1ZSl7XG5cdFx0XHR2YXIgZmllbGRJc1ZhbGlkID0gdGhpcy52YWxpZGF0ZVByZXNlbmNlKGtleSwgdmFsdWUpICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgdGhpcy52YWxpZGF0ZUNvbnRlbnQoa2V5LCB2YWx1ZSk7XG5cdFx0XHRpZihmaWVsZElzVmFsaWQpe1xuXHRcdFx0XHR0aGlzLnJlbW92ZUVycm9yKGtleSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmllbGRJc1ZhbGlkO1xuXHR9LFxuXG5cblx0dmFsaWRhdGVQcmVzZW5jZTogZnVuY3Rpb24gdmFsaWRhdGVQcmVzZW5jZShrZXksIHZhbHVlKXtcblx0XHRpZiAoICF0aGlzLmlzUHJlc2VudChrZXksIHZhbHVlKSApIHtcblx0XHRcdHRoaXMuYWRkRXJyb3Ioa2V5KTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cdHZhbGlkYXRlQ29udGVudDogZnVuY3Rpb24gdmFsaWRhdGVDb250ZW50KGtleSwgdmFsdWUpe1xuXHRcdGlmICggdGhpcy5pc051bWVyaWNhbGx5VmFsaWQoIGtleSwgdmFsdWUgKSAmJlxuXHRcdFx0XHRcdHRoaXMuaXNJblJhbmdlKCBrZXksIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5hZGRFcnJvcihrZXkpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXG5cdGlzVmFsaWRJbnB1dDogZnVuY3Rpb24gaXNWYWxpZElucHV0KGVsKSB7XG5cdFx0aWYgKCBlbC5hdHRyKCd0eXBlJykgPT09ICd0ZXh0JyApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdGlzVmFsaWRDaGVja2JveDogZnVuY3Rpb24gaXNWYWxpZENoZWNrYm94KGVsKSB7XG5cdFx0aWYgKCBlbC5wcm9wKCdjaGVja2VkJykgKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXHRpc1ZhbGlkU2VsZWN0OiBmdW5jdGlvbiBpc1ZhbGlkU2VsZWN0KGVsKSB7XG5cdFx0aWYgKCBlbFswXS50YWdOYW1lID09PSAnU0VMRUNUJyAmJiBlbC52YWwoKSApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdGlzTnVtZXJpY2FsbHlWYWxpZDogZnVuY3Rpb24gaXNOdW1lcmljYWxseVZhbGlkKCBrZXksIHZhbHVlICl7XG5cdFx0dmFyIGhhc1Jlc3RyaWN0aW9ucyA9IHRoaXMucmVzdHJpY3Rpb25zICE9PSB1bmRlZmluZWQ7XG5cdFx0aWYoICFoYXNSZXN0cmljdGlvbnMgKXsgcmV0dXJuIHRydWU7IH1cblx0XHRpZiggdGhpcy5yZXN0cmljdGlvbnNba2V5XSA9PT0gJ251bWVyaWMnICl7XG5cdFx0XHRyZXR1cm4gdGhpcy5pc051bWVyaWMoIHZhbHVlICk7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXHRpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyggdmFsdWUgKXtcblx0XHRpZiggaXNOYU4oIE51bWJlciggdmFsdWUgKSApICl7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXHRpc0Fib3ZlOiBmdW5jdGlvbiBpc0Fib3ZlKCBrZXksIHZhbHVlICl7XG5cdFx0dmFyIG1pbiA9IHRoaXMucmFuZ2VzW2tleV0ubWluO1xuXHRcdGlmKCAhbWluICl7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuaXNOdW1lcmljKCB2YWx1ZSApICYmIHZhbHVlID49IG1pbjtcblx0fSxcblx0aXNCZWxvdzogZnVuY3Rpb24gaXNCZWxvdygga2V5LCB2YWx1ZSApe1xuXHRcdHZhciBtYXggPSB0aGlzLnJhbmdlc1trZXldLm1heDtcblx0XHRpZiggIW1heCApe1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmlzTnVtZXJpYyggdmFsdWUgKSAmJiB2YWx1ZSA8PSBtYXg7XG5cdH0sXG5cblxuXHRpc1ByZXNlbnQ6IGZ1bmN0aW9uIGlzUHJlc2VudChrZXksIHZhbHVlKXtcblx0XHRyZXR1cm4gdGhpcy5yZXF1aXJlZFtrZXldID09PSBmYWxzZSB8fCB2YWx1ZSAhPT0gJyc7XG5cdH0sXG5cdGlzSW5SYW5nZTogZnVuY3Rpb24gaXNJblJhbmdlKGtleSwgdmFsdWUpe1xuXHRcdGlmKHRoaXMucmFuZ2VzW2tleV0gPT09IHVuZGVmaW5lZCl7IHJldHVybiB0cnVlOyB9XG5cdFx0cmV0dXJuIHRoaXMuaXNBYm92ZShrZXksIHZhbHVlKSAmJlxuXHRcdFx0XHRcdCB0aGlzLmlzQmVsb3coa2V5LCB2YWx1ZSk7XG5cdH0sXG5cblx0YWRkQW5zd2VyOiBmdW5jdGlvbiBhZGRBbnN3ZXIoY29udGFpbmVyKXtcblx0XHR0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmFkZChjb250YWluZXIpO1xuXHRcdHRoaXMuc2V0Q2FsbGJhY2tDaGFuZ2UoY29udGFpbmVyKTtcblx0XHR0aGlzLnNldFJhbmdlcygpO1xuXHRcdHRoaXMuc2V0UmVxdWlyZWQoKTtcblx0fSxcblx0cmVtb3ZlQW5zd2VyOiBmdW5jdGlvbiByZW1vdmVBbnN3ZXIoY29udGFpbmVyKXtcblx0XHR0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLm5vdChjb250YWluZXIpO1xuXHRcdHRoaXMudW5zZXRDaGFuZ2UoY29udGFpbmVyKTtcblx0XHR0aGlzLnNldFJhbmdlcygpO1xuXHRcdHRoaXMucmVxdWlyZWQgPSB7fTtcblx0XHR0aGlzLnNldFJlcXVpcmVkKCk7XG5cdFx0dGhpcy5kZWxldGVWYWx1ZSggY29udGFpbmVyICk7XG5cdH1cblxufTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBBbnN3ZXJzID0gZnVuY3Rpb24oKXtcblx0dGhpcy5wcml2YXRlVmFsdWUgPSB7fTtcblx0dGhpcy5hbGwgPSBbXTtcbn07XG5BbnN3ZXJzLnByb3RvdHlwZSA9IHtcblx0Y3JlYXRlQW5zd2VyIDogZnVuY3Rpb24gY3JlYXRlQW5zd2VyKGRvbSl7XG5cdFx0dmFyIGFuc3dlciA9IG5ldyBBbnN3ZXIoIGRvbSApO1xuXHRcdHRoaXMuYWxsLnB1c2goYW5zd2VyKTtcblx0XHRyZXR1cm4gYW5zd2VyO1xuXHR9LFxuXHRnZXRSZWNvcmQ6IGZ1bmN0aW9uKCl7XG5cdFx0dGhpcy5yZXBvcnQoKTtcblx0XHRyZXR1cm4gdGhpcy5wcml2YXRlVmFsdWU7XG5cdH0sXG5cdHNldFJlY29yZDogZnVuY3Rpb24oYXJnKXtcblx0XHR0aGlzLnByaXZhdGVWYWx1ZSA9IGFyZztcblx0fSxcblx0dmFsaWRhdGVBbGwgOiBmdW5jdGlvbiB2YWxpZGF0ZUFsbCgpe1xuXHRcdGZvcih2YXIgaSA9IDA7IGk8IHRoaXMuYWxsLmxlbmd0aDsgaSsrKXtcblx0XHRcdHRoaXMuYWxsW2ldLmlzVmFsaWQoKTtcblx0XHR9XG5cdH0sXG5cdHJlcG9ydCA6IGZ1bmN0aW9uIHJlcG9ydCgpe1xuXHRcdGZvcih2YXIgaSA9IDA7IGk8IHRoaXMuYWxsLmxlbmd0aDsgaSsrKXtcblx0XHRcdCQuZXh0ZW5kKHRoaXMucHJpdmF0ZVZhbHVlLCB0aGlzLmFsbFtpXS52YWx1ZSk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnByaXZhdGVWYWx1ZTtcblx0fSxcblx0cmVzZXRBbGwgOiBmdW5jdGlvbiByZXNldEFsbCgpe1xuXHRcdGZvcih2YXIgaSA9IDA7IGk8IHRoaXMuYWxsLmxlbmd0aDsgaSsrKXtcblx0XHRcdHRoaXMuYWxsW2ldLmZvcm1hdFZhbHVlKHRydWUpO1xuXHRcdH1cblx0XHR0aGlzLnJlcG9ydCgpO1xuXHR9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgU2NlbmUgPSBmdW5jdGlvbiggZWwgKXtcblx0dGhpcy5jb250YWluZXIgICA9IGVsO1xuXHR0aGlzLmJvdW5kICAgICAgID0gZmFsc2U7XG5cdHJldHVybiB0aGlzO1xufTtcblNjZW5lLnByb3RvdHlwZSA9IHtcblx0c2V0Q2FsbGJhY2sgOiBmdW5jdGlvbiBzZXRDYWxsYmFjayggY2FsbGJhY2s9ZmFsc2UsIGFyZ3M9ZmFsc2UgKXtcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0dGhpcy5hcmdzID0gYXJncztcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0U2NyaXB0IDogZnVuY3Rpb24gc2V0U2NyaXB0KCBzY3JpcHQgKXtcblx0XHR0aGlzLnNjcmlwdCA9IHNjcmlwdCB8fCB1bmRlZmluZWQ7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdHNldEJ1dHRvbiA6IGZ1bmN0aW9uIHNldEJ1dHRvbigga2xhc3M9Jy5qcy1idXR0b24nICl7XG5cdFx0dGhpcy5idXR0b24gPSB0aGlzLmZpbmRCdXR0b24oIGtsYXNzICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdHNldEFuc3dlciA6IGZ1bmN0aW9uIHNldEFuc3dlcigga2xhc3M9Jy5qcy1hbnN3ZXInICl7XG5cdFx0dGhpcy5hbnN3ZXJDbGFzcyA9IGtsYXNzO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRiaW5kQ2xpY2tzIDogZnVuY3Rpb24gYmluZENsaWNrcygpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR0aGlzLmJ1dHRvbi5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRzZWxmLmJpbmRDbGljaygkKHRoaXMpKTtcblx0XHR9KTtcblx0fSxcblx0aW5pdCA6IGZ1bmN0aW9uIGluaXQoIHNjcmlwdCwgb3B0cz17fSApe1xuXHRcdHRoaXMuc2V0Q2FsbGJhY2soIG9wdHMuY2FsbGJhY2ssIG9wdHMuY2FsbGJhY2tBcmdzIClcblx0XHRcdFx0LnNldFNjcmlwdCggc2NyaXB0IClcblx0XHRcdFx0LnNldEJ1dHRvbiggb3B0cy5idXR0b24gKVxuXHRcdFx0XHQuc2V0QW5zd2VyKCBvcHRzLmFuc3dlciApXG5cdFx0XHRcdC5jcmVhdGVBbnN3ZXJzKClcblx0XHRcdFx0LmJpbmRDbGlja3MoKTtcblx0fSxcblx0Y3JlYXRlQW5zd2VycyA6IGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcnMoKXtcblx0XHRpZih0aGlzLnNjcmlwdCA9PT0gdW5kZWZpbmVkKXtcblx0XHRcdHRoaXMuYW5zd2VyID0gbmV3IEFuc3dlcih0aGlzLmNvbnRhaW5lci5maW5kKHRoaXMuYW5zd2VyQ2xhc3MpKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHR2YXIgYW5zd2VyRWwgPSB0aGlzLmNvbnRhaW5lci5maW5kKHRoaXMuYW5zd2VyQ2xhc3MpO1xuXHRcdHRoaXMuYW5zd2VyID0gdGhpcy5zY3JpcHQuYW5zd2Vycy5jcmVhdGVBbnN3ZXIoIGFuc3dlckVsICk7XG5cdFx0cmV0dXJuIHRoaXNcblx0fSxcblx0ZmluZEJ1dHRvbiA6IGZ1bmN0aW9uIGZpbmRCdXR0b24oYnV0dG9uQ2xhc3Mpe1xuXHRcdGlmKGJ1dHRvbkNsYXNzICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyLmZpbmQoYnV0dG9uQ2xhc3MpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5jb250YWluZXIuZmluZCgnLmpzLWJ1dHRvbicpO1xuXHR9LFxuXHRzaG93IDogZnVuY3Rpb24gc2hvdygpe1xuXHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdhY3RpdmUnKS5hZGRDbGFzcygnanMtYWN0aXZlJyk7XG5cdH0sXG5cdGhpZGUgOiBmdW5jdGlvbiBoaWRlKCl7XG5cdFx0dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcblx0fSxcblx0c2hha2UgOiBmdW5jdGlvbiBzaGFrZSgpe1xuXHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdqcy1lcnJvcicpLmFkZENsYXNzKCdlcnJvcicpO1xuXHR9LFxuXHR1bnNoYWtlIDogZnVuY3Rpb24gdW5zaGFrZSgpe1xuXHRcdHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCdqcy1lcnJvcicpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuXHR9LFxuXHRoYW5kbGVDYWxsYmFjazogZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2soKSB7XG5cdFx0dmFyIGFyZ3MgPSB0eXBlb2YgdGhpcy5hcmdzID09PSAnZnVuY3Rpb24nID9cblx0XHRcdFx0dGhpcy5hcmdzKCkgOiB0aGlzLmFyZ3M7XG5cblx0XHRpZiAoIHRoaXMuY2FsbGJhY2spIHtcblx0XHRcdHRoaXMuY2FsbGJhY2soIGFyZ3MgKTtcblx0XHR9XG5cdH0sXG5cdGZpbmFsaXplIDogZnVuY3Rpb24gZmluYWxpemUoKXtcblx0XHR0aGlzLnVuc2hha2UoKTtcblx0XHRpZih0aGlzLnNjcmlwdCAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdHRoaXMuc2NyaXB0Lm5leHQoKTtcblx0XHR9XG5cdFx0dGhpcy5oYW5kbGVDYWxsYmFjaygpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXHR2YWxpZGF0ZSA6IGZ1bmN0aW9uIHZhbGlkYXRlKCl7XG5cdFx0dGhpcy5hbnN3ZXIuaXNWYWxpZCgpO1xuXHRcdGlmKCQodGhpcy5hbnN3ZXIuY29udGFpbmVyKS5oYXNDbGFzcygnanMtZXJyb3InKSl7XG5cdFx0XHR0aGlzLnNoYWtlKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHRoaXMuZmluYWxpemUoKTtcblx0fSxcblx0YmluZENsaWNrIDogZnVuY3Rpb24gYmluZENsaWNrKGVsKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0ZWwuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRcdHNlbGYudmFsaWRhdGUoKTtcblx0XHR9KTtcblx0XHR0aGlzLmJvdW5kID0gdHJ1ZTtcblx0fSxcblx0ZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpe1xuXHRcdHRoaXMuaGlkZSgpO1xuXHRcdGRlbGV0ZSB0aGlzLmFuc3dlcnM7XG5cdFx0ZGVsZXRlIHRoaXM7XG5cdH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBTdG9yeWJvYXJkZXIgPSBmdW5jdGlvbiggY29udGFpbmVyLCBhdXRvPXRydWUgKSB7XG5cdHRoaXMuY29udGFpbmVyICAgPSBjb250YWluZXIgfHwgJCgnLmpzLXN0b3J5Ym9hcmQnKTtcblx0dGhpcy5zY2VuZXMgICAgICA9IFtdO1xuXHR0aGlzLmN1cnJlbnQgICAgID0gMDtcblx0dGhpcy5hbnN3ZXJzICAgICA9IG5ldyBBbnN3ZXJzKCk7XG5cdGlmKCBhdXRvICl7XG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblx0cmV0dXJuIHRoaXM7XG59O1xuU3Rvcnlib2FyZGVyLnByb3RvdHlwZSA9IHtcblx0cmVwb3J0OiBmdW5jdGlvbiByZXBvcnQoKXtcblx0XHRyZXR1cm4gdGhpcy5hbnN3ZXJzLnJlcG9ydCgpO1xuXHR9LFxuXHRzZXRGaW5pc2hlZCA6IGZ1bmN0aW9uIHNldEZpbmlzaGVkKCBvbkZpbmlzaGVkLCBhcmdzICl7XG5cdFx0dGhpcy5vbkZpbmlzaGVkID0gb25GaW5pc2hlZCAgfHwgZmFsc2U7XG5cdFx0dGhpcy5hcmdzID0gYXJncyB8fCBmYWxzZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0U2NlbmUgOiBmdW5jdGlvbiBzZXRTY2VuZSgga2xhc3MgKXtcblx0XHR0aGlzLnNjZW5lQ2xhc3MgID0ga2xhc3MgIHx8ICcuanMtc2NlbmUnO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRCdXR0b24gOiBmdW5jdGlvbiBzZXRCdXR0b24oIGtsYXNzICl7XG5cdFx0dGhpcy5idXR0b25DbGFzcyA9IGtsYXNzIHx8ICcuanMtYnV0dG9uJztcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0QW5zd2VyIDogZnVuY3Rpb24gc2V0QW5zd2VyKCBrbGFzcyApe1xuXHRcdHRoaXMuYW5zd2VyQ2xhc3MgPSBrbGFzcyB8fCAnLmpzLWFuc3dlcic7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdG1ha2VTY2VuZXMgOiBmdW5jdGlvbiBtYWtlU2NlbmVzKCBvcHRzICl7XG5cdFx0aWYoIHRoaXMuYW5zd2VycyAhPT0gdW5kZWZpbmVkICl7XG5cdFx0XHRvcHRzLmFuc3dlcnMgPSB0aGlzLmFuc3dlcnM7XG5cdFx0fVxuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR0aGlzLmNvbnRhaW5lci5maW5kKCB0aGlzLnNjZW5lQ2xhc3MgKS5lYWNoKCBmdW5jdGlvbigpe1xuXHRcdFx0c2VsZi5hZGRTY2VuZSggJCggdGhpcyApLCBvcHRzICk7XG5cdFx0fSApO1xuXHRcdHJldHVybiB0aGlzXG5cdH0sXG5cdGluaXQgOiBmdW5jdGlvbiBpbml0KCBvcHRzID0ge30gKXtcblx0XHR0aGlzLnNldEZpbmlzaGVkKCBvcHRzLm9uRmluaXNoZWQsIG9wdHMub25GaW5pc2hlZEFyZ3MgKVxuXHRcdFx0XHQuc2V0U2NlbmUoIG9wdHMuc2NlbmUgKVxuXHRcdFx0XHQuc2V0QnV0dG9uKCBvcHRzLmJ1dHRvbiApXG5cdFx0XHRcdC5zZXRBbnN3ZXIoIG9wdHMuYW5zd2VyIClcblx0XHRcdFx0Lm1ha2VTY2VuZXMoIG9wdHMgKVxuXHRcdFx0XHQuc3RhcnQoKTtcblx0fSxcblxuXHRhZGRTY2VuZSA6IGZ1bmN0aW9uIGFkZFNjZW5lKCBlbCwgb3B0cyApe1xuXHRcdGxldCBzY2VuZSA9IG5ldyBTY2VuZSggZWwgKTtcblx0XHRzY2VuZS5pbml0KCB0aGlzLCBvcHRzICk7XG5cdFx0dGhpcy5zY2VuZXMucHVzaCggc2NlbmUgKTtcblx0fSxcblx0cmVtb3ZlU2NlbmUgOiBmdW5jdGlvbiByZW1vdmVTY2VuZSgpe1xuXHRcdHRoaXMuc2NlbmVzLnBvcCgpLmRlc3Ryb3koKTtcblx0fSxcblxuXG5cdGFkZEF0IDogZnVuY3Rpb24gYWRkQXQoIGluZGV4LCBlbCwgb3B0cyApe1xuXHRcdGxldCBzY2VuZSA9IG5ldyBTY2VuZSggZWwgKTtcblx0XHRzY2VuZS5pbml0KCB0aGlzLCBvcHRzICk7XG5cdFx0dGhpcy5zY2VuZXMuc3BsaWNlKCBpbmRleCwgMCwgc2NlbmUgKTtcblx0fSxcblx0cmVtb3ZlQXQgOiBmdW5jdGlvbiByZW1vdmVBdCggaW5kZXggKXtcblx0XHR0aGlzLnNjZW5lcy5zcGxpY2UoIGluZGV4LCAxIClbIDAgXS5kZXN0cm95KCk7XG5cdH0sXG5cblxuXHRwcmV2aW91cyA6IGZ1bmN0aW9uIHByZXZpb3VzKCl7XG5cdFx0dGhpcy5zY2VuZXNbIHRoaXMuY3VycmVudCBdLmhpZGUoKTtcblx0XHRpZiggdGhpcy5jdXJyZW50ID4gMCApe1xuXHRcdFx0dGhpcy51bnRpY2soKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHR0aGlzLnN0YXJ0KCk7XG5cdH0sXG5cdG5leHQgOiBmdW5jdGlvbiBuZXh0KCl7XG5cdFx0dGhpcy5zY2VuZXNbIHRoaXMuY3VycmVudCBdLmhpZGUoKTtcblx0XHRpZiggdGhpcy5zY2VuZXMubGVuZ3RoIC0xID4gdGhpcy5jdXJyZW50ICl7XG5cdFx0XHR0aGlzLnRpY2soKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHR0aGlzLmZpbmlzaCgpO1xuXHR9LFxuXG5cblx0dGljayA6IGZ1bmN0aW9uIHRpY2soKXtcblx0XHR0aGlzLmN1cnJlbnQgKz0gMTtcblx0XHR0aGlzLnNjZW5lc1sgdGhpcy5jdXJyZW50IF0uc2hvdygpO1xuXHR9LFxuXHR1bnRpY2sgOiBmdW5jdGlvbiB1bnRpY2soKXtcblx0XHR0aGlzLmN1cnJlbnQgLT0gMTtcblx0XHR0aGlzLnNjZW5lc1sgdGhpcy5jdXJyZW50IF0uc2hvdygpO1xuXHR9LFxuXG5cdGhhbmRsZUZ1bmN0aW9uIDogZnVuY3Rpb24gaGFuZGxlRnVuY3Rpb24oIGZ1bmN0LCBhcmdzICl7XG5cdFx0ZnVuY3QuY2FsbCggdGhpcywgYXJncyApO1xuXHR9LFxuXG5cdGhhbmRsZUFycmF5IDogZnVuY3Rpb24gaGFuZGxlQXJyYXkoKXtcblx0XHR0aGlzLmZvcm1hdEFyZ3NBcnJheSgpO1xuXHRcdGZvciggbGV0IGkgPSAwOyBpPCB0aGlzLm9uRmluaXNoZWQubGVuZ3RoOyBpKysgKXtcblx0XHRcdHRoaXMub25GaW5pc2hlZFsgaSBdLmNhbGwoIHRoaXMsIHRoaXMuYXJnc1sgaSBdICk7XG5cdFx0fVxuXHR9LFxuXHRmb3JtYXRBcmdzQXJyYXkgOiBmdW5jdGlvbiBmb3JtYXRBcmdzQXJyYXkoKXtcblx0XHRpZiggdHlwZW9mIHRoaXMuYXJncyA9PT0gJ29iamVjdCcgKXtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5hcmdzID0gbmV3IEFycmF5KCB0aGlzLmFyZ3MgKTtcblx0fSxcblx0ZmluaXNoIDogZnVuY3Rpb24gZmluaXNoKCl7XG5cdFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ2ZpbmlzaGVkJyk7XG5cdFx0aWYoIHRoaXMub25GaW5pc2hlZCApe1xuXHRcdFx0aWYoIHR5cGVvZiB0aGlzLm9uRmluaXNoZWQgPT09ICdmdW5jdGlvbicgKXtcblx0XHRcdFx0dGhpcy5oYW5kbGVGdW5jdGlvbiggdGhpcy5vbkZpbmlzaGVkLCB0aGlzLmFyZ3MgKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5oYW5kbGVBcnJheSgpO1xuXHRcdH1cblx0fSxcblx0c3RhcnQgOiBmdW5jdGlvbiBzdGFydCgpe1xuXHRcdHRoaXMuY3VycmVudCA9IDA7XG5cdFx0dGhpcy5zY2VuZXNbIHRoaXMuY3VycmVudCBdLnNob3coKTtcblx0XHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyggJ3N0YXJ0ZWQnICk7XG5cdH0sXG5cdHJlc3RhcnQ6IGZ1bmN0aW9uIHJlc3RhcnQoKXtcblx0XHR0aGlzLmFuc3dlcnMucmVzZXRBbGwoKTtcblx0XHR0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggJ2ZpbmlzaGVkJyApO1xuXHRcdHRoaXMuc3RhcnQoKTtcblx0fSxcblx0YWRkQ2FsbGJhY2tUb1NjZW5lOiBmdW5jdGlvbiggc2NlbmVJZHgsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIHNjZW5lID0gdGhpcy5zY2VuZXNbIHNjZW5lSWR4IF07XG5cdFx0c2NlbmUuYXJncyA9IGFyZztcblx0XHRzY2VuZS5jYWxsYmFjayA9IGNhbGxiYWNrLmJpbmQoIHNjZW5lICk7XG5cdH1cbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=