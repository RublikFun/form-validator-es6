'use strict';

var Answer = function Answer(container) {
	this.ranges = {};
	this.required = {};
	this.container = container;
	this.value = {};
	this.validations = [];
	this.init();
};
Answer.prototype = {
	init: function init() {
		this.setRanges();
		this.setRequired();
		this.formatValue();
		this.setChange(this.container);
	},
	setValidation: function setValidation(arg) {
		if (typeof arg === 'boolean') {
			this.validations.push(arg);
			return;
		}
		this.validations = [];
	},
	getValidation: function getValidation() {
		var i,
		    allAreValid = true;
		for (i = 0; i < this.validations.length; i++) {
			if (this.validations[i] === false) {
				allAreValid = false;
				break;
			}
		}
		return allAreValid;
	},
	setRanges: function setRanges() {
		var self = this;
		$(this.container).each(function () {
			self.ranges[$(this).data('field')] = {
				max: $(this).data('max'),
				min: $(this).data('min')
			};
		});
	},
	setRequired: function setRequired() {
		var self = this;
		$(this.container).each(function () {
			if ($(this).data('required') === false) {
				self.required[$(this).data('field')] = false;
			} else {
				self.required[$(this).data('field')] = true;
			}
		});
	},
	setChange: function setChange(els) {
		var self = this;
		els.on('change', function () {
			self.callbackCheck();
			self.formatValue();
		});
	},
	setCallbackChange: function setCallbackChange(els) {
		var self = this,
		    elementsToBind;
		elementsToBind = els.filter(function () {
			if (self.hasField(this)) {
				return this;
			}
		});
		$(elementsToBind).on('change', function () {
			self.formatValue();
		});
	},
	unsetChange: function unsetChange(els) {
		var self = this,
		    elementsToBind;
		elementsToBind = els.filter(function () {
			if (self.hasField(this)) {
				return this;
			}
		});
		$(elementsToBind).off('change');
	},
	callbackCheck: function callbackCheck() {
		var self = this;
		$(this.container).each(function () {
			self.checkForCallback($(this));
		});
	},

	formatValue: function formatValue(shouldReset) {
		var self = this,
		    reset = shouldReset || false;
		$(this.container).each(function () {
			if (reset) {
				self.clearValue($(this));
			}
			self.trackValue($(this));
		});
	},
	trackValue: function trackValue(el) {
		var key = el.data('grouping');
		if (key !== undefined) {
			this.trackDimensionalValue(el, key);
		} else {
			$.extend(this.value, this.formattedValue(el));
		}
	},
	trackDimensionalValue: function trackDimensionalValue(el, key) {
		this.value[key] = this.value[key] === undefined ? {} : this.value[key];
		$.extend(this.value[key], this.formattedValue(el));
	},
	formattedValue: function formattedValue(el) {
		var val = {};
		var key = el.data('field');
		val[key] = this.getDefault(el);
		if (this.hasValue(el)) {
			val[key] = this.getValueOrDefault(el);
			this.removeError(key);
			return val;
		}
		if (this.shouldOverwrite(el)) {
			val[key] = this.getDefault(el);
			return val;
		}
		return;
	},
	getValueOrDefault: function getValueOrDefault(el) {
		var value = el.val();
		if (value === '') {
			value = this.getDefault(el);
		}
		return value;
	},
	getDefault: function getDefault(el) {
		var value = '';
		if (el.data('default') !== undefined) {
			value = el.data('default');
		}
		return value;
	},
	deleteValue: function deleteValue(el) {
		var self = this;
		$(el).each(function () {
			delete self.value[$(this).data('field')];
		});
	},
	checkForCallback: function checkForCallback(el) {
		if (this.hasValue(el)) {
			return this.revealCallback(el);
		}

		return this.revertCallback(el);
	},
	revealCallback: function revealCallback(el) {
		var callbackElement = $('.' + el.data('callback')),
		    self = this;
		if (callbackElement.length > 0) {
			callbackElement.each(function () {
				if (self.hasField(this)) {
					self.addAnswer($(this));
				}
			});
			callbackElement.addClass('active');
		}
	},
	revertCallback: function revertCallback(el) {
		var callbackElement = $('.' + el.data('callback'));
		if (callbackElement.length > 0) {
			this.clearValue(callbackElement);
			this.removeAnswer(callbackElement);
			callbackElement.removeClass('active');
		}
	},

	hasValue: function hasValue(container) {
		return this.isValidInput(container) || this.isValidCheckbox(container) || this.isValidSelect(container);
	},
	shouldOverwrite: function shouldOverwrite(el) {
		return this.isDuplicate(el) && this.isFirst(el) || !this.isDuplicate(el);
	},
	isDuplicate: function isUnique(el) {
		return $('[data-field="' + el.data('field') + '"]').length > 1;
	},
	isFirst: function isFirst(el) {
		return $('[data-field="' + el.data('field') + '"]').index(el) === 0;
	},
	clearValue: function clearValue(el) {
		if (this.isValidInput(el)) {
			el.val('');
		}
		el.prop('checked', false);
		el.find('option').prop('selected', false);
	},
	hasField: function hasField(el) {
		if ($(el).data('field')) {
			return true;
		}
		return false;
	},

	addError: function addError(answer) {
		$('[data-field="' + answer + '"]').addClass('error');
	},
	removeError: function removeError(answer) {
		$('[data-field="' + answer + '"]').removeClass('error');
	},

	isValid: function isValid() {
		this.setValidation();
		for (var answer in this.value) {
			var value = this.value[answer];
			if (typeof value === 'object') {
				var validity = this.checkGroupValidity(value);
				this.setValidation(validity);
			} else {
				var validity = this.checkIndividualValidity(answer, value);
				this.setValidation(validity);
			}
		}
		return this.getValidation();
	},
	checkGroupValidity: function checkGroupValidity(group) {
		var groupIsValid = true;
		for (var subAnswer in group) {
			groupIsValid = this.checkIndividualValidity(subAnswer, group[subAnswer]);
		}
		return groupIsValid;
	},
	checkIndividualValidity: function checkIndividualValidity(key, value) {
		var fieldIsValid = this.validatePresence(key, value) && this.validateRange(key, value);
		if (fieldIsValid) {
			this.removeError(key);
		}
		return fieldIsValid;
	},

	validatePresence: function validatePresence(key, value) {
		if (!this.isPresent(key, value)) {
			this.addError(key);
			return false;
		}
		return true;
	},
	validateRange: function validateRange(key, value) {
		if (!this.isBetween(key, value)) {
			this.addError(key);
			return false;
		}
		return true;
	},

	isValidInput: function isValidInput(el) {
		if (el.attr('type') === 'text') {
			return true;
		}
		return false;
	},
	isValidCheckbox: function isValidCheckbox(el) {
		if (el.prop('checked')) {
			return true;
		}
		return false;
	},
	isValidSelect: function isValidSelect(el) {
		if (el[0].tagName === 'SELECT' && el.val()) {
			return true;
		}
		return false;
	},

	isPresent: function isPresent(key, value) {
		return this.required[key] === false || value !== '';
	},
	isBetween: function isBetween(key, value) {
		if (this.ranges[key] === undefined) {
			return true;
		}
		var max = this.ranges[key].max;
		var min = this.ranges[key].min;
		if (max === undefined || min === undefined) {
			return true;
		}
		return value <= max && value >= min;
	},

	addAnswer: function addAnswer(container) {
		this.container = this.container.add(container);
		this.setCallbackChange(container);
		this.setRanges();
		this.setRequired();
	},
	removeAnswer: function removeAnswer(container) {
		this.container = this.container.not(container);
		this.unsetChange(container);
		this.setRanges();
		this.required = {};
		this.setRequired();
		this.deleteValue(container);
	}

};
'use strict';

var Answers = function Answers() {
	this.privateValue = {};
	this.all = [];
};
Answers.prototype = {
	createAnswer: function createAnswer(dom) {
		var answer = new Answer(dom);
		this.all.push(answer);
		return answer;
	},
	getRecord: function getRecord() {
		this.report();
		return this.privateValue;
	},
	setRecord: function setRecord(arg) {
		this.privateValue = arg;
	},
	validateAll: function validateAll() {
		for (var i = 0; i < this.all.length; i++) {
			this.all[i].isValid();
		}
	},
	report: function report() {
		for (var i = 0; i < this.all.length; i++) {
			$.extend(this.privateValue, this.all[i].value);
		}
		return this.privateValue;
	},
	resetAll: function resetAll() {
		for (var i = 0; i < this.all.length; i++) {
			this.all[i].formatValue(true);
		}
		this.report();
	}
};
'use strict';

var Scene = function Scene(klass) {
	this.container = klass;
	this.bound = false;
	return this;
};
Scene.prototype = {
	setCallback: function setCallback(callback, args) {
		this.callback = callback || false;
		this.args = args || false;
		return this;
	},
	setScript: function setScript(script) {
		this.script = script || undefined;
		return this;
	},
	setButton: function setButton(klass) {
		this.button = this.findButton(klass);
		return this;
	},
	setAnswer: function setAnswer(klass) {
		this.answerClass = klass || '.js-answer';
		return this;
	},
	init: function init() {
		var self = this;
		this.createAnswers();
		this.button.each(function () {
			self.bindClick($(this));
		});
	},
	autoInit: function autoInit() {
		var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		this.setCallback(opts.callback, opts.arguments).setScript(opts.script).setButton(opts.button).setAnswer(opts.answer).init();
	},
	createAnswers: function createAnswers() {
		if (this.script === undefined) {
			this.answer = new Answer(this.container.find(this.answerClass));
			return true;
		}
		var answerEl = this.container.find(this.answerClass);
		this.answer = this.script.answers.createAnswer(answerEl);
	},
	findButton: function findButton(buttonClass) {
		if (buttonClass !== undefined) {
			return this.container.find(buttonClass);
		}
		return this.container.find('.js-button');
	},
	show: function show() {
		this.container.addClass('active');
	},
	hide: function hide() {
		this.container.removeClass('active');
	},
	shake: function shake() {
		this.container.addClass('error');
	},
	unshake: function unshake() {
		this.container.removeClass('error');
	},
	handleCallback: function handleCallback() {
		var args = typeof this.args === 'function' ? this.args() : this.args;

		if (this.callback) {
			this.callback(args);
		}
	},
	finalize: function finalize() {
		this.unshake();
		if (this.script !== undefined) {
			this.script.next();
		}
		this.handleCallback();
		return true;
	},
	validate: function validate() {
		this.answer.isValid();
		if ($(this.answer.container).hasClass('error')) {
			this.shake();
			return false;
		}
		this.finalize();
	},
	bindClick: function bindClick(el) {
		var self = this;
		el.click(function () {
			self.validate();
		});
		this.bound = true;
	},
	destroy: function destroy() {
		this.hide();
		delete this.answers;
		delete this;
	}
};
'use strict';

var Script = function Script(container) {
	var auto = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];

	this.container = container;
	this.scenes = [];
	this.current = 0;
	if (auto) {
		this.autoInit();
	}
	return this;
};
Script.prototype = {
	setFinished: function setFinished(onFinished, args) {
		this.onFinished = onFinished || false;
		this.args = args || false;
		return this;
	},
	setScene: function setScene(klass) {
		this.sceneClass = klass || '.js-scene';
		return this;
	},
	setButton: function setButton(klass) {
		this.buttonClass = klass || '.js-button';
		return this;
	},
	setAnswer: function setAnswer(klass) {
		this.answerClass = klass || '.js-answer';
		return this;
	},
	setAnswers: function setAnswers(answers) {
		this.answers = answers || new Answers();
		return this;
	},
	init: function init() {
		var self = this;
		this.container.find(this.sceneClass).each(function () {
			self.addScene($(this));
		});
		this.start();
	},
	autoInit: function autoInit() {
		var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		this.setFinished(opts.onFinished, opts.arguments).setScene(opts.scene).setButton(opts.button).setAnswer(opts.answer).setAnswers(opts.answers).init();
	},

	addScene: function addScene(el, opts) {
		var scene = new Scene(el);
		scene.autoInit(opts);
		this.scenes.push(scene);
	},
	removeScene: function removeScene() {
		this.scenes.pop().destroy();
	},

	addAt: function addAt(index, el, opts) {
		var scene = new Scene(el);
		scene.autoInit(opts);
		this.scenes.splice(index, 0, scene);
	},
	removeAt: function removeAt(index) {
		this.scenes.splice(index, 1)[0].destroy();
	},

	previous: function previous() {
		this.scenes[this.current].hide();
		if (this.current > 0) {
			this.untick();
			return true;
		}
		this.start();
	},
	next: function next() {
		this.scenes[this.current].hide();
		if (this.scenes.length - 1 > this.current) {
			this.tick();
			return true;
		}
		this.finish();
	},

	tick: function tick() {
		this.current += 1;
		this.scenes[this.current].show();
	},
	untick: function untick() {
		this.current -= 1;
		this.scenes[this.current].show();
	},

	handleFunction: function handleFunction(funct, args) {
		funct.call(this, args);
	},

	handleArray: function handleArray() {
		this.formatArgsArray();
		for (var i = 0; i < this.onFinished.length; i++) {
			this.onFinished[i].call(this, this.args[i]);
		}
	},
	formatArgsArray: function formatArgsArray() {
		if (typeof this.args === 'object') {
			return;
		}
		this.args = new Array(this.args);
	},
	finish: function finish() {
		this.container.addClass('finished');
		if (this.onFinished) {
			if (typeof this.onFinished === 'function') {
				this.handleFunction(this.onFinished, this.args);
				return;
			}
			this.handleArray();
		}
	},
	start: function start() {
		this.current = 0;
		this.scenes[this.current].show();
		this.container.addClass('started');
	},
	restart: function restart() {
		this.answers.resetAll();
		this.container.removeClass('finished');
		this.start();
	},
	addCallbackToScene: function addCallbackToScene(sceneIdx, callback, arg) {
		var scene = this.scenes[sceneIdx];
		scene.args = arg;
		scene.callback = callback.bind(scene);
	}
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuc3dlci5qcyIsImFuc3dlcnMuanMiLCJzY2VuZS5qcyIsInNjcmlwdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsSUFBSSxNQUFNLEdBQUcsU0FBVCxNQUFNLENBQVksU0FBUyxFQUFDO0FBQy9CLEtBQUksQ0FBQyxNQUFNLEdBQVEsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxRQUFRLEdBQU0sRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxTQUFTLEdBQUssU0FBUyxDQUFDO0FBQzdCLEtBQUksQ0FBQyxLQUFLLEdBQVMsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLEtBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztDQUNaLENBQUM7QUFDRixNQUFNLENBQUMsU0FBUyxHQUFHO0FBQ2xCLEtBQUksRUFBRSxTQUFTLElBQUksR0FBRTtBQUNwQixNQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDakIsTUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ25CLE1BQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNuQixNQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztFQUMvQjtBQUNELGNBQWEsRUFBRSx1QkFBUyxHQUFHLEVBQUM7QUFDM0IsTUFBRyxPQUFPLEdBQUcsS0FBSyxTQUFTLEVBQUM7QUFDM0IsT0FBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsVUFBTztHQUNQO0FBQ0QsTUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7RUFDdEI7QUFDRCxjQUFhLEVBQUUseUJBQVU7QUFDeEIsTUFBSSxDQUFDO01BQUUsV0FBVyxHQUFHLElBQUksQ0FBQztBQUMxQixPQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFB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QVEsQ0FBRSxTQUFTLENBQUUsQ0FBQztFQUNyQztBQUNELFFBQU8sRUFBRSxTQUFTLE9BQU8sR0FBRTtBQUMxQixNQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hCLE1BQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFFLFVBQVUsQ0FBRSxDQUFDO0FBQ3pDLE1BQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztFQUNiO0FBQ0QsbUJBQWtCLEVBQUUsNEJBQVUsUUFBUSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUc7QUFDdkQsTUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBRSxRQUFRLENBQUUsQ0FBQztBQUNwQyxPQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNqQixPQUFLLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUUsS0FBSyxDQUFFLENBQUM7RUFDeEM7Q0FDRCxDQUFDIiwiZmlsZSI6InN0b3J5Ym9hcmRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIEFuc3dlciA9IGZ1bmN0aW9uKGNvbnRhaW5lcil7XG5cdHRoaXMucmFuZ2VzICAgICAgPSB7fTtcblx0dGhpcy5yZXF1aXJlZCAgICA9IHt9O1xuXHR0aGlzLmNvbnRhaW5lciAgID0gY29udGFpbmVyO1xuXHR0aGlzLnZhbHVlICAgICAgID0ge307XG5cdHRoaXMudmFsaWRhdGlvbnMgPSBbXTtcblx0dGhpcy5pbml0KCk7XHRcbn07XG5BbnN3ZXIucHJvdG90eXBlID0ge1xuXHRpbml0OiBmdW5jdGlvbiBpbml0KCl7XG5cdFx0dGhpcy5zZXRSYW5nZXMoKTtcblx0XHR0aGlzLnNldFJlcXVpcmVkKCk7XG5cdFx0dGhpcy5mb3JtYXRWYWx1ZSgpO1xuXHRcdHRoaXMuc2V0Q2hhbmdlKHRoaXMuY29udGFpbmVyKTtcblx0fSxcblx0c2V0VmFsaWRhdGlvbjogZnVuY3Rpb24oYXJnKXtcblx0XHRpZih0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpe1xuXHRcdFx0dGhpcy52YWxpZGF0aW9ucy5wdXNoKGFyZyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMudmFsaWRhdGlvbnMgPSBbXTtcblx0fSxcblx0Z2V0VmFsaWRhdGlvbjogZnVuY3Rpb24oKXtcblx0XHR2YXIgaSwgYWxsQXJlVmFsaWQgPSB0cnVlO1xuXHRcdGZvcihpID0gMDsgaSA8IHRoaXMudmFsaWRhdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKHRoaXMudmFsaWRhdGlvbnNbaV0gPT09IGZhbHNlKSB7XG5cdFx0XHRcdGFsbEFyZVZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gYWxsQXJlVmFsaWQ7XG5cdH0sXG5cdHNldFJhbmdlczogZnVuY3Rpb24gc2V0UmFuZ2VzKCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdCQodGhpcy5jb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHNlbGYucmFuZ2VzWyQodGhpcykuZGF0YSgnZmllbGQnKV0gPSB7XG5cdFx0XHRcdG1heDogJCh0aGlzKS5kYXRhKCdtYXgnKSwgXG5cdFx0XHRcdG1pbjogJCh0aGlzKS5kYXRhKCdtaW4nKVxuXHRcdFx0fTtcblx0XHR9KTtcblx0fSxcblx0c2V0UmVxdWlyZWQ6IGZ1bmN0aW9uIHNldFJlcXVpcmVkKCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdCQodGhpcy5jb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdGlmKCQodGhpcykuZGF0YSgncmVxdWlyZWQnKSA9PT0gZmFsc2UgKXtcblx0XHRcdFx0c2VsZi5yZXF1aXJlZFskKHRoaXMpLmRhdGEoJ2ZpZWxkJyldID0gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLnJlcXVpcmVkWyQodGhpcykuZGF0YSgnZmllbGQnKV0gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXHRzZXRDaGFuZ2U6IGZ1bmN0aW9uIHNldENoYW5nZShlbHMpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRlbHMub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRzZWxmLmNhbGxiYWNrQ2hlY2soKTtcblx0XHRcdFx0c2VsZi5mb3JtYXRWYWx1ZSgpO1xuXHRcdFx0fSk7XG5cdH0sXG5cdHNldENhbGxiYWNrQ2hhbmdlOiBmdW5jdGlvbiBzZXRDYWxsYmFja0NoYW5nZShlbHMpe1xuXHRcdHZhciBzZWxmID0gdGhpcywgZWxlbWVudHNUb0JpbmQ7XG5cdFx0ZWxlbWVudHNUb0JpbmQgPSBlbHMuZmlsdGVyKGZ1bmN0aW9uKCl7XHRcblx0XHRcdGlmKHNlbGYuaGFzRmllbGQodGhpcykpe1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKGVsZW1lbnRzVG9CaW5kKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHNlbGYuZm9ybWF0VmFsdWUoKTtcblx0XHRcdH0pO1xuXHR9LFx0XG5cdHVuc2V0Q2hhbmdlOiBmdW5jdGlvbiB1bnNldENoYW5nZShlbHMpe1xuXHRcdHZhciBzZWxmID0gdGhpcywgZWxlbWVudHNUb0JpbmQ7XG5cdFx0ZWxlbWVudHNUb0JpbmQgPSBlbHMuZmlsdGVyKGZ1bmN0aW9uKCl7XHRcblx0XHRcdGlmKHNlbGYuaGFzRmllbGQodGhpcykpe1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKGVsZW1lbnRzVG9CaW5kKS5vZmYoJ2NoYW5nZScpO1xuXHR9LFx0XHRcblx0Y2FsbGJhY2tDaGVjazogZnVuY3Rpb24gY2FsbGJhY2tDaGVjaygpe1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHQkKHRoaXMuY29udGFpbmVyKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRzZWxmLmNoZWNrRm9yQ2FsbGJhY2soJCh0aGlzKSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0Zm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHNob3VsZFJlc2V0KXtcblx0XHR2YXIgc2VsZiA9IHRoaXMsIHJlc2V0ID0gc2hvdWxkUmVzZXQgfHwgZmFsc2U7XG5cdFx0JCh0aGlzLmNvbnRhaW5lcikuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0aWYocmVzZXQpe1xuXHRcdFx0XHRzZWxmLmNsZWFyVmFsdWUoJCh0aGlzKSk7XG5cdFx0XHR9XHRcdFx0XHRcdFxuXHRcdFx0c2VsZi50cmFja1ZhbHVlKCAkKHRoaXMpICk7XG5cdFx0fSk7XG5cdH0sXHRcblx0dHJhY2tWYWx1ZTogZnVuY3Rpb24gdHJhY2tWYWx1ZShlbCl7XG5cdFx0dmFyIGtleSA9IGVsLmRhdGEoJ2dyb3VwaW5nJyk7XG5cdFx0aWYoa2V5ICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0dGhpcy50cmFja0RpbWVuc2lvbmFsVmFsdWUoZWwsIGtleSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLnZhbHVlLCB0aGlzLmZvcm1hdHRlZFZhbHVlKGVsKSApO1xuXHRcdH1cblx0fSxcblx0dHJhY2tEaW1lbnNpb25hbFZhbHVlOiBmdW5jdGlvbiB0cmFja0RpbWVuc2lvbmFsVmFsdWUoZWwsIGtleSl7XG5cdFx0dGhpcy52YWx1ZVtrZXldID0gdGhpcy52YWx1ZVtrZXldID09PSB1bmRlZmluZWQgPyB7fSA6IHRoaXMudmFsdWVba2V5XTtcblx0XHQkLmV4dGVuZCggdGhpcy52YWx1ZVtrZXldLCB0aGlzLmZvcm1hdHRlZFZhbHVlKGVsKSApO1xuXHR9LFxuXHRmb3JtYXR0ZWRWYWx1ZTogZnVuY3Rpb24gZm9ybWF0dGVkVmFsdWUoZWwpe1xuXHRcdHZhciB2YWwgPSB7fTtcblx0XHR2YXIga2V5ID0gZWwuZGF0YSggJ2ZpZWxkJyApO1xuXHRcdFx0XHR2YWxbIGtleSBdID0gdGhpcy5nZXREZWZhdWx0KCBlbCApO1x0XHRcblx0XHRpZiggdGhpcy5oYXNWYWx1ZShlbCkgKXtcblx0XHRcdHZhbFsga2V5IF0gPSB0aGlzLmdldFZhbHVlT3JEZWZhdWx0KCBlbCApO1xuXHRcdFx0dGhpcy5yZW1vdmVFcnJvcigga2V5ICk7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblx0XHRpZiggdGhpcy5zaG91bGRPdmVyd3JpdGUoIGVsICkgKXtcblx0XHRcdHZhbFsga2V5IF0gPSB0aGlzLmdldERlZmF1bHQoIGVsICk7XHRcdFx0XHRcdFxuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuO1xuXHR9LFxuXHRnZXRWYWx1ZU9yRGVmYXVsdDogZnVuY3Rpb24gZ2V0VmFsdWVPckRlZmF1bHQoIGVsICl7XG5cdFx0dmFyIHZhbHVlID0gZWwudmFsKCk7XG5cdFx0aWYoIHZhbHVlID09PSAnJyApe1xuXHRcdFx0dmFsdWUgPSB0aGlzLmdldERlZmF1bHQoIGVsICk7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcblx0Z2V0RGVmYXVsdDogZnVuY3Rpb24gZ2V0RGVmYXVsdCggZWwgKXtcblx0XHR2YXIgdmFsdWUgPSAnJztcblx0XHRpZiggZWwuZGF0YSgnZGVmYXVsdCcpICE9PSB1bmRlZmluZWQgKXtcblx0XHRcdHZhbHVlID0gZWwuZGF0YSgnZGVmYXVsdCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG5cdGRlbGV0ZVZhbHVlOiBmdW5jdGlvbiBkZWxldGVWYWx1ZSggZWwgKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0JCggZWwgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSBzZWxmLnZhbHVlWyAkKCB0aGlzICkuZGF0YSggJ2ZpZWxkJyApIF07XG5cdFx0fSApO1xuXHR9LFxuXHRjaGVja0ZvckNhbGxiYWNrOiBmdW5jdGlvbiBjaGVja0ZvckNhbGxiYWNrKCBlbCApe1xuXHRcdGlmICggdGhpcy5oYXNWYWx1ZSggZWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLnJldmVhbENhbGxiYWNrKCBlbCApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnJldmVydENhbGxiYWNrKCBlbCApO1xuXHR9LFxuXHRyZXZlYWxDYWxsYmFjazogZnVuY3Rpb24gcmV2ZWFsQ2FsbGJhY2soIGVsICl7XG5cdFx0dmFyIGNhbGxiYWNrRWxlbWVudCA9ICQoICcuJyArIGVsLmRhdGEoICdjYWxsYmFjaycgKSApLFxuXHRcdHNlbGYgPSB0aGlzO1xuXHRcdGlmKCBjYWxsYmFja0VsZW1lbnQubGVuZ3RoID4gMCApe1xuXHRcdFx0Y2FsbGJhY2tFbGVtZW50LmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiggc2VsZi5oYXNGaWVsZCggdGhpcyApICl7XG5cdFx0XHRcdFx0c2VsZi5hZGRBbnN3ZXIoICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0XHRjYWxsYmFja0VsZW1lbnQuYWRkQ2xhc3MoICdhY3RpdmUnICk7XG5cdFx0fVxuXHR9LFxuXHRyZXZlcnRDYWxsYmFjazogZnVuY3Rpb24gcmV2ZXJ0Q2FsbGJhY2soIGVsICl7XG5cdFx0dmFyIGNhbGxiYWNrRWxlbWVudCA9ICQoICcuJyArIGVsLmRhdGEoICdjYWxsYmFjaycgKSApO1xuXHRcdGlmKCBjYWxsYmFja0VsZW1lbnQubGVuZ3RoID4gMCApe1x0XHRcblx0XHRcdHRoaXMuY2xlYXJWYWx1ZSggY2FsbGJhY2tFbGVtZW50ICk7XG5cdFx0XHR0aGlzLnJlbW92ZUFuc3dlciggY2FsbGJhY2tFbGVtZW50ICk7XG5cdFx0XHRjYWxsYmFja0VsZW1lbnQucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XG5cdFx0fVxuXHR9LFxuXG5cblx0aGFzVmFsdWU6IGZ1bmN0aW9uIGhhc1ZhbHVlKGNvbnRhaW5lcil7XG5cdFx0cmV0dXJuIHRoaXMuaXNWYWxpZElucHV0KGNvbnRhaW5lcikgfHwgXG5cdFx0XHRcdFx0IHRoaXMuaXNWYWxpZENoZWNrYm94KGNvbnRhaW5lcikgfHxcblx0XHRcdFx0XHQgdGhpcy5pc1ZhbGlkU2VsZWN0KGNvbnRhaW5lcik7XG5cdH0sXG5cdHNob3VsZE92ZXJ3cml0ZTogZnVuY3Rpb24gc2hvdWxkT3ZlcndyaXRlKGVsKXtcblx0XHRyZXR1cm4gKCB0aGlzLmlzRHVwbGljYXRlKGVsKSAmJiBcblx0XHRcdFx0XHRcdCB0aGlzLmlzRmlyc3QoZWwpICkgfHwgXG5cdFx0XHRcdFx0XHQhdGhpcy5pc0R1cGxpY2F0ZShlbCk7XG5cdH0sXG5cdGlzRHVwbGljYXRlOiBmdW5jdGlvbiBpc1VuaXF1ZShlbCl7XG5cdFx0cmV0dXJuICQoJ1tkYXRhLWZpZWxkPVwiJytlbC5kYXRhKCdmaWVsZCcpKydcIl0nKS5sZW5ndGggPiAxO1xuXHR9LFxuXHRpc0ZpcnN0OiBmdW5jdGlvbiBpc0ZpcnN0KGVsKXtcblx0XHRyZXR1cm4gJCgnW2RhdGEtZmllbGQ9XCInK2VsLmRhdGEoJ2ZpZWxkJykrJ1wiXScpLmluZGV4KGVsKSA9PT0gMDtcblx0fSxcblx0Y2xlYXJWYWx1ZTogZnVuY3Rpb24gY2xlYXJWYWx1ZShlbCl7XG5cdFx0aWYoIHRoaXMuaXNWYWxpZElucHV0KGVsKSApe1xuXHRcdFx0ZWwudmFsKCcnKTtcblx0XHR9XG5cdFx0ZWwucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcblx0XHRlbC5maW5kKCdvcHRpb24nKS5wcm9wKCdzZWxlY3RlZCcsIGZhbHNlKTtcblx0fSxcblx0aGFzRmllbGQ6IGZ1bmN0aW9uIGhhc0ZpZWxkKCBlbCApe1xuXHRcdGlmICgkKGVsKS5kYXRhKCdmaWVsZCcpKSB7IFxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXHRhZGRFcnJvcjogZnVuY3Rpb24gYWRkRXJyb3IoYW5zd2VyKXtcblx0XHQkKCdbZGF0YS1maWVsZD1cIicrYW5zd2VyKydcIl0nKS5hZGRDbGFzcygnZXJyb3InKTtcblx0fSxcblx0cmVtb3ZlRXJyb3I6IGZ1bmN0aW9uIHJlbW92ZUVycm9yKGFuc3dlcil7XG5cdFx0JCgnW2RhdGEtZmllbGQ9XCInK2Fuc3dlcisnXCJdJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG5cdH0sXHRcblxuXG5cdGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKXtcblx0XHR0aGlzLnNldFZhbGlkYXRpb24oKTtcblx0XHRmb3IoIHZhciBhbnN3ZXIgaW4gdGhpcy52YWx1ZSApe1xuXHRcdFx0dmFyIHZhbHVlID0gdGhpcy52YWx1ZVthbnN3ZXJdO1xuXHRcdFx0aWYoIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgKXtcblx0XHRcdFx0bGV0IHZhbGlkaXR5ID0gdGhpcy5jaGVja0dyb3VwVmFsaWRpdHkoIHZhbHVlICk7XG5cdFx0XHRcdHRoaXMuc2V0VmFsaWRhdGlvbiggdmFsaWRpdHkgKTtcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0bGV0IHZhbGlkaXR5ID0gdGhpcy5jaGVja0luZGl2aWR1YWxWYWxpZGl0eSggYW5zd2VyLCB2YWx1ZSApO1xuXHRcdFx0XHR0aGlzLnNldFZhbGlkYXRpb24oIHZhbGlkaXR5ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmdldFZhbGlkYXRpb24oKTtcblx0fSxcblx0Y2hlY2tHcm91cFZhbGlkaXR5OiBmdW5jdGlvbiBjaGVja0dyb3VwVmFsaWRpdHkoZ3JvdXApe1xuXHRcdHZhciBncm91cElzVmFsaWQgPSB0cnVlO1xuXHRcdGZvcih2YXIgc3ViQW5zd2VyIGluIGdyb3VwICl7XG5cdFx0XHRncm91cElzVmFsaWQgPSB0aGlzLmNoZWNrSW5kaXZpZHVhbFZhbGlkaXR5KHN1YkFuc3dlciwgZ3JvdXBbc3ViQW5zd2VyXSk7XG5cdFx0fVxuXHRcdHJldHVybiBncm91cElzVmFsaWQ7XG5cdH0sXG5cdGNoZWNrSW5kaXZpZHVhbFZhbGlkaXR5OiBmdW5jdGlvbiBjaGVja0luZGl2aWR1YWxWYWxpZGl0eShrZXksIHZhbHVlKXtcblx0XHRcdHZhciBmaWVsZElzVmFsaWQgPSB0aGlzLnZhbGlkYXRlUHJlc2VuY2Uoa2V5LCB2YWx1ZSkgJiYgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgdGhpcy52YWxpZGF0ZVJhbmdlKGtleSwgdmFsdWUpO1xuXHRcdFx0aWYoZmllbGRJc1ZhbGlkKXtcblx0XHRcdFx0dGhpcy5yZW1vdmVFcnJvcihrZXkpO1x0XHRcblx0XHRcdH1cblx0XHRcdHJldHVybiBmaWVsZElzVmFsaWQ7XG5cdH0sXG5cblxuXHR2YWxpZGF0ZVByZXNlbmNlOiBmdW5jdGlvbiB2YWxpZGF0ZVByZXNlbmNlKGtleSwgdmFsdWUpe1xuXHRcdGlmICggIXRoaXMuaXNQcmVzZW50KGtleSwgdmFsdWUpICkge1xuXHRcdFx0dGhpcy5hZGRFcnJvcihrZXkpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0dmFsaWRhdGVSYW5nZTogZnVuY3Rpb24gdmFsaWRhdGVSYW5nZShrZXksIHZhbHVlKXtcblx0XHRpZiAoICF0aGlzLmlzQmV0d2VlbihrZXksIHZhbHVlKSApIHtcblx0XHRcdHRoaXMuYWRkRXJyb3Ioa2V5KTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XHRcdFxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cblx0aXNWYWxpZElucHV0OiBmdW5jdGlvbiBpc1ZhbGlkSW5wdXQoZWwpIHtcblx0XHRpZiAoIGVsLmF0dHIoJ3R5cGUnKSA9PT0gJ3RleHQnICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblx0aXNWYWxpZENoZWNrYm94OiBmdW5jdGlvbiBpc1ZhbGlkQ2hlY2tib3goZWwpIHtcblx0XHRpZiAoIGVsLnByb3AoJ2NoZWNrZWQnKSApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdGlzVmFsaWRTZWxlY3Q6IGZ1bmN0aW9uIGlzVmFsaWRTZWxlY3QoZWwpIHtcblx0XHRpZiAoIGVsWzBdLnRhZ05hbWUgPT09ICdTRUxFQ1QnICYmIGVsLnZhbCgpICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSxcblxuXG5cdGlzUHJlc2VudDogZnVuY3Rpb24gaXNQcmVzZW50KGtleSwgdmFsdWUpe1xuXHRcdHJldHVybiB0aGlzLnJlcXVpcmVkW2tleV0gPT09IGZhbHNlIHx8IHZhbHVlICE9PSAnJztcblx0fSxcblx0aXNCZXR3ZWVuOiBmdW5jdGlvbiBpc0JldHdlZW4oa2V5LCB2YWx1ZSl7XG5cdFx0aWYodGhpcy5yYW5nZXNba2V5XSA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIHRydWU7IH1cblx0XHR2YXIgbWF4ID0gdGhpcy5yYW5nZXNba2V5XS5tYXg7XG5cdFx0dmFyIG1pbiA9IHRoaXMucmFuZ2VzW2tleV0ubWluO1xuXHRcdGlmKG1heCA9PT0gdW5kZWZpbmVkIHx8IG1pbiA9PT0gdW5kZWZpbmVkKXtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWUgPD0gbWF4ICYmIHZhbHVlID49IG1pbjtcblx0fSxcblxuXHRhZGRBbnN3ZXI6IGZ1bmN0aW9uIGFkZEFuc3dlcihjb250YWluZXIpe1xuXHRcdHRoaXMuY29udGFpbmVyID0gdGhpcy5jb250YWluZXIuYWRkKGNvbnRhaW5lcik7XG5cdFx0dGhpcy5zZXRDYWxsYmFja0NoYW5nZShjb250YWluZXIpO1x0XHRcblx0XHR0aGlzLnNldFJhbmdlcygpO1xuXHRcdHRoaXMuc2V0UmVxdWlyZWQoKTtcblx0fSxcblx0cmVtb3ZlQW5zd2VyOiBmdW5jdGlvbiByZW1vdmVBbnN3ZXIoY29udGFpbmVyKXtcblx0XHR0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLm5vdChjb250YWluZXIpO1xuXHRcdHRoaXMudW5zZXRDaGFuZ2UoY29udGFpbmVyKTtcdFx0XHRcdFxuXHRcdHRoaXMuc2V0UmFuZ2VzKCk7XG5cdFx0dGhpcy5yZXF1aXJlZCA9IHt9O1xuXHRcdHRoaXMuc2V0UmVxdWlyZWQoKTtcblx0XHR0aGlzLmRlbGV0ZVZhbHVlKCBjb250YWluZXIgKTtcblx0fVxuXG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIEFuc3dlcnMgPSBmdW5jdGlvbigpe1xuXHR0aGlzLnByaXZhdGVWYWx1ZSA9IHt9O1xuXHR0aGlzLmFsbCA9IFtdO1xufTtcbkFuc3dlcnMucHJvdG90eXBlID0ge1xuXHRjcmVhdGVBbnN3ZXIgOiBmdW5jdGlvbiBjcmVhdGVBbnN3ZXIoZG9tKXtcblx0XHR2YXIgYW5zd2VyID0gbmV3IEFuc3dlciggZG9tICk7XG5cdFx0dGhpcy5hbGwucHVzaChhbnN3ZXIpO1xuXHRcdHJldHVybiBhbnN3ZXI7XG5cdH0sXG5cdGdldFJlY29yZDogZnVuY3Rpb24oKXtcblx0XHR0aGlzLnJlcG9ydCgpO1xuXHRcdHJldHVybiB0aGlzLnByaXZhdGVWYWx1ZTtcblx0fSxcblx0c2V0UmVjb3JkOiBmdW5jdGlvbihhcmcpe1xuXHRcdHRoaXMucHJpdmF0ZVZhbHVlID0gYXJnO1xuXHR9LFxuXHR2YWxpZGF0ZUFsbCA6IGZ1bmN0aW9uIHZhbGlkYXRlQWxsKCl7XG5cdFx0Zm9yKHZhciBpID0gMDsgaTwgdGhpcy5hbGwubGVuZ3RoOyBpKyspe1xuXHRcdFx0dGhpcy5hbGxbaV0uaXNWYWxpZCgpO1xuXHRcdH1cblx0fSxcblx0cmVwb3J0IDogZnVuY3Rpb24gcmVwb3J0KCl7XG5cdFx0Zm9yKHZhciBpID0gMDsgaTwgdGhpcy5hbGwubGVuZ3RoOyBpKyspe1xuXHRcdFx0JC5leHRlbmQodGhpcy5wcml2YXRlVmFsdWUsIHRoaXMuYWxsW2ldLnZhbHVlKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMucHJpdmF0ZVZhbHVlO1xuXHR9LFxuXHRyZXNldEFsbCA6IGZ1bmN0aW9uIHJlc2V0QWxsKCl7XG5cdFx0Zm9yKHZhciBpID0gMDsgaTwgdGhpcy5hbGwubGVuZ3RoOyBpKyspe1xuXHRcdFx0dGhpcy5hbGxbaV0uZm9ybWF0VmFsdWUodHJ1ZSk7XG5cdFx0fVxuXHRcdHRoaXMucmVwb3J0KCk7XG5cdH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBTY2VuZSA9IGZ1bmN0aW9uKCBrbGFzcyApe1xuXHR0aGlzLmNvbnRhaW5lciAgID0ga2xhc3M7XG5cdHRoaXMuYm91bmQgICAgICAgPSBmYWxzZTtcblx0cmV0dXJuIHRoaXM7XG59O1xuU2NlbmUucHJvdG90eXBlID0ge1xuXHRzZXRDYWxsYmFjayA6IGZ1bmN0aW9uIHNldENhbGxiYWNrKCBjYWxsYmFjaywgYXJncyApe1xuXHRcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmYWxzZTtcblx0XHR0aGlzLmFyZ3MgPSBhcmdzIHx8IGZhbHNlO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRTY3JpcHQgOiBmdW5jdGlvbiBzZXRTY3JpcHQoIHNjcmlwdCApe1xuXHRcdHRoaXMuc2NyaXB0ID0gc2NyaXB0IHx8IHVuZGVmaW5lZDtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0QnV0dG9uIDogZnVuY3Rpb24gc2V0QnV0dG9uKCBrbGFzcyApe1xuXHRcdHRoaXMuYnV0dG9uID0gdGhpcy5maW5kQnV0dG9uKCBrbGFzcyApO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRBbnN3ZXIgOiBmdW5jdGlvbiBzZXRBbnN3ZXIoIGtsYXNzICl7XG5cdFx0dGhpcy5hbnN3ZXJDbGFzcyA9IGtsYXNzIHx8ICcuanMtYW5zd2VyJztcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0aW5pdCA6IGZ1bmN0aW9uIGluaXQoKXtcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0dGhpcy5jcmVhdGVBbnN3ZXJzKCk7XG5cdFx0dGhpcy5idXR0b24uZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0c2VsZi5iaW5kQ2xpY2soJCh0aGlzKSk7XG5cdFx0fSk7XG5cdH0sXG5cdGF1dG9Jbml0IDogZnVuY3Rpb24gYXV0b0luaXQoIG9wdHM9e30gKXtcblx0XHR0aGlzLnNldENhbGxiYWNrKCBvcHRzLmNhbGxiYWNrLCBvcHRzLmFyZ3VtZW50cyApXG5cdFx0XHRcdC5zZXRTY3JpcHQoIG9wdHMuc2NyaXB0IClcblx0XHRcdFx0LnNldEJ1dHRvbiggb3B0cy5idXR0b24gKVxuXHRcdFx0XHQuc2V0QW5zd2VyKCBvcHRzLmFuc3dlciApXG5cdFx0XHRcdC5pbml0KCk7XG5cdH0sXG5cdGNyZWF0ZUFuc3dlcnMgOiBmdW5jdGlvbiBjcmVhdGVBbnN3ZXJzKCl7XG5cdFx0aWYodGhpcy5zY3JpcHQgPT09IHVuZGVmaW5lZCl7XG5cdFx0XHR0aGlzLmFuc3dlciA9IG5ldyBBbnN3ZXIodGhpcy5jb250YWluZXIuZmluZCh0aGlzLmFuc3dlckNsYXNzKSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dmFyIGFuc3dlckVsID0gdGhpcy5jb250YWluZXIuZmluZCh0aGlzLmFuc3dlckNsYXNzKTtcblx0XHR0aGlzLmFuc3dlciA9IHRoaXMuc2NyaXB0LmFuc3dlcnMuY3JlYXRlQW5zd2VyKCBhbnN3ZXJFbCApO1xuXHR9LFxuXHRmaW5kQnV0dG9uIDogZnVuY3Rpb24gZmluZEJ1dHRvbihidXR0b25DbGFzcyl7XG5cdFx0aWYoYnV0dG9uQ2xhc3MgIT09IHVuZGVmaW5lZCl7XG5cdFx0XHRyZXR1cm4gdGhpcy5jb250YWluZXIuZmluZChidXR0b25DbGFzcyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmNvbnRhaW5lci5maW5kKCcuanMtYnV0dG9uJyk7XG5cdH0sXG5cdHNob3cgOiBmdW5jdGlvbiBzaG93KCl7XG5cdFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9LFxuXHRoaWRlIDogZnVuY3Rpb24gaGlkZSgpe1xuXHRcdHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0fSxcblx0c2hha2UgOiBmdW5jdGlvbiBzaGFrZSgpe1xuXHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdlcnJvcicpO1xuXHR9LFxuXHR1bnNoYWtlIDogZnVuY3Rpb24gdW5zaGFrZSgpe1xuXHRcdHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuXHR9LFxuXHRoYW5kbGVDYWxsYmFjazogZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2soKSB7XG5cdFx0dmFyIGFyZ3MgPSB0eXBlb2YgdGhpcy5hcmdzID09PSAnZnVuY3Rpb24nID8gXG5cdFx0XHRcdHRoaXMuYXJncygpIDogdGhpcy5hcmdzO1xuXG5cdFx0aWYgKCB0aGlzLmNhbGxiYWNrKSB7XG5cdFx0XHR0aGlzLmNhbGxiYWNrKCBhcmdzICk7XG5cdFx0fVxuXHR9LFxuXHRmaW5hbGl6ZSA6IGZ1bmN0aW9uIGZpbmFsaXplKCl7XG5cdFx0dGhpcy51bnNoYWtlKCk7XG5cdFx0aWYodGhpcy5zY3JpcHQgIT09IHVuZGVmaW5lZCl7XG5cdFx0XHR0aGlzLnNjcmlwdC5uZXh0KCk7XG5cdFx0fVxuXHRcdHRoaXMuaGFuZGxlQ2FsbGJhY2soKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0dmFsaWRhdGUgOiBmdW5jdGlvbiB2YWxpZGF0ZSgpe1xuXHRcdHRoaXMuYW5zd2VyLmlzVmFsaWQoKTtcblx0XHRpZigkKHRoaXMuYW5zd2VyLmNvbnRhaW5lcikuaGFzQ2xhc3MoJ2Vycm9yJykpe1xuXHRcdFx0dGhpcy5zaGFrZSgpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLmZpbmFsaXplKCk7XG5cdH0sXG5cdGJpbmRDbGljayA6IGZ1bmN0aW9uIGJpbmRDbGljayhlbCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdGVsLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdFx0XHRzZWxmLnZhbGlkYXRlKCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5ib3VuZCA9IHRydWU7XG5cdH0sXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKXtcblx0XHR0aGlzLmhpZGUoKTtcblx0XHRkZWxldGUgdGhpcy5hbnN3ZXJzO1xuXHRcdGRlbGV0ZSB0aGlzO1xuXHR9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgU2NyaXB0ID0gZnVuY3Rpb24oIGNvbnRhaW5lciwgYXV0bz10cnVlICkge1xuXHR0aGlzLmNvbnRhaW5lciAgID0gY29udGFpbmVyO1xuXHR0aGlzLnNjZW5lcyAgICAgID0gW107XG5cdHRoaXMuY3VycmVudCAgICAgPSAwO1xuXHRpZiggYXV0byApe1xuXHRcdHRoaXMuYXV0b0luaXQoKTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn07XG5TY3JpcHQucHJvdG90eXBlID0ge1xuXHRzZXRGaW5pc2hlZCA6IGZ1bmN0aW9uIHNldEZpbmlzaGVkKCBvbkZpbmlzaGVkLCBhcmdzICl7XG5cdFx0dGhpcy5vbkZpbmlzaGVkID0gb25GaW5pc2hlZCAgfHwgZmFsc2U7XG5cdFx0dGhpcy5hcmdzID0gYXJncyB8fCBmYWxzZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0U2NlbmUgOiBmdW5jdGlvbiBzZXRTY2VuZSgga2xhc3MgKXtcblx0XHR0aGlzLnNjZW5lQ2xhc3MgID0ga2xhc3MgIHx8ICcuanMtc2NlbmUnO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHRzZXRCdXR0b24gOiBmdW5jdGlvbiBzZXRCdXR0b24oIGtsYXNzICl7XG5cdFx0dGhpcy5idXR0b25DbGFzcyA9IGtsYXNzIHx8ICcuanMtYnV0dG9uJztcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0c2V0QW5zd2VyIDogZnVuY3Rpb24gc2V0QW5zd2VyKCBrbGFzcyApe1xuXHRcdHRoaXMuYW5zd2VyQ2xhc3MgPSBrbGFzcyB8fCAnLmpzLWFuc3dlcic7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdHNldEFuc3dlcnM6IGZ1bmN0aW9uIHNldEFuc3dlcnMoIGFuc3dlcnMgKXtcblx0XHR0aGlzLmFuc3dlcnMgPSBhbnN3ZXJzIHx8IG5ldyBBbnN3ZXJzKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdGluaXQgOiBmdW5jdGlvbiBpbml0KCl7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHRoaXMuY29udGFpbmVyLmZpbmQoIHRoaXMuc2NlbmVDbGFzcyApLmVhY2goIGZ1bmN0aW9uKCl7XG5cdFx0XHRzZWxmLmFkZFNjZW5lKCAkKCB0aGlzICkgKTtcblx0XHR9ICk7XG5cdFx0dGhpcy5zdGFydCgpO1xuXHR9LFxuXHRhdXRvSW5pdCA6IGZ1bmN0aW9uIGF1dG9Jbml0KCBvcHRzID0ge30gKXtcblx0XHR0aGlzLnNldEZpbmlzaGVkKCBvcHRzLm9uRmluaXNoZWQsIG9wdHMuYXJndW1lbnRzIClcblx0XHRcdFx0LnNldFNjZW5lKCBvcHRzLnNjZW5lIClcblx0XHRcdFx0LnNldEJ1dHRvbiggb3B0cy5idXR0b24gKVxuXHRcdFx0XHQuc2V0QW5zd2VyKCBvcHRzLmFuc3dlciApXG5cdFx0XHRcdC5zZXRBbnN3ZXJzKCBvcHRzLmFuc3dlcnMgKVxuXHRcdFx0XHQuaW5pdCgpO1xuXHR9LFxuXG5cdGFkZFNjZW5lIDogZnVuY3Rpb24gYWRkU2NlbmUoIGVsLCBvcHRzICl7XG5cdFx0bGV0IHNjZW5lID0gbmV3IFNjZW5lKCBlbCApO1xuXHRcdHNjZW5lLmF1dG9Jbml0KCBvcHRzICk7XG5cdFx0dGhpcy5zY2VuZXMucHVzaCggc2NlbmUgKTtcblx0fSxcblx0cmVtb3ZlU2NlbmUgOiBmdW5jdGlvbiByZW1vdmVTY2VuZSgpe1xuXHRcdHRoaXMuc2NlbmVzLnBvcCgpLmRlc3Ryb3koKTtcblx0fSxcblxuXG5cdGFkZEF0IDogZnVuY3Rpb24gYWRkQXQoIGluZGV4LCBlbCwgb3B0cyApe1xuXHRcdGxldCBzY2VuZSA9IG5ldyBTY2VuZSggZWwgKTtcblx0XHRzY2VuZS5hdXRvSW5pdCggb3B0cyApO1xuXHRcdHRoaXMuc2NlbmVzLnNwbGljZSggaW5kZXgsIDAsIHNjZW5lICk7XG5cdH0sXG5cdHJlbW92ZUF0IDogZnVuY3Rpb24gcmVtb3ZlQXQoIGluZGV4ICl7XG5cdFx0dGhpcy5zY2VuZXMuc3BsaWNlKCBpbmRleCwgMSApWyAwIF0uZGVzdHJveSgpO1xuXHR9LFxuXG5cblx0cHJldmlvdXMgOiBmdW5jdGlvbiBwcmV2aW91cygpe1xuXHRcdHRoaXMuc2NlbmVzWyB0aGlzLmN1cnJlbnQgXS5oaWRlKCk7XG5cdFx0aWYoIHRoaXMuY3VycmVudCA+IDAgKXtcblx0XHRcdHRoaXMudW50aWNrKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5zdGFydCgpO1xuXHR9LFxuXHRuZXh0IDogZnVuY3Rpb24gbmV4dCgpe1xuXHRcdHRoaXMuc2NlbmVzWyB0aGlzLmN1cnJlbnQgXS5oaWRlKCk7XG5cdFx0aWYoIHRoaXMuc2NlbmVzLmxlbmd0aCAtMSA+IHRoaXMuY3VycmVudCApe1xuXHRcdFx0dGhpcy50aWNrKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dGhpcy5maW5pc2goKTtcblx0fSxcblxuXG5cdHRpY2sgOiBmdW5jdGlvbiB0aWNrKCl7XG5cdFx0dGhpcy5jdXJyZW50ICs9IDE7XG5cdFx0dGhpcy5zY2VuZXNbIHRoaXMuY3VycmVudCBdLnNob3coKTtcblx0fSxcblx0dW50aWNrIDogZnVuY3Rpb24gdW50aWNrKCl7XG5cdFx0dGhpcy5jdXJyZW50IC09IDE7XG5cdFx0dGhpcy5zY2VuZXNbIHRoaXMuY3VycmVudCBdLnNob3coKTtcblx0fSxcblxuXHRoYW5kbGVGdW5jdGlvbiA6IGZ1bmN0aW9uIGhhbmRsZUZ1bmN0aW9uKCBmdW5jdCwgYXJncyApe1xuXHRcdGZ1bmN0LmNhbGwoIHRoaXMsIGFyZ3MgKTtcblx0fSxcblxuXHRoYW5kbGVBcnJheSA6IGZ1bmN0aW9uIGhhbmRsZUFycmF5KCl7XG5cdFx0dGhpcy5mb3JtYXRBcmdzQXJyYXkoKTtcblx0XHRmb3IoIGxldCBpID0gMDsgaTwgdGhpcy5vbkZpbmlzaGVkLmxlbmd0aDsgaSsrICl7XG5cdFx0XHR0aGlzLm9uRmluaXNoZWRbIGkgXS5jYWxsKCB0aGlzLCB0aGlzLmFyZ3NbIGkgXSApO1xuXHRcdH1cblx0fSxcblx0Zm9ybWF0QXJnc0FycmF5IDogZnVuY3Rpb24gZm9ybWF0QXJnc0FycmF5KCl7XG5cdFx0aWYoIHR5cGVvZiB0aGlzLmFyZ3MgPT09ICdvYmplY3QnICl7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuYXJncyA9IG5ldyBBcnJheSggdGhpcy5hcmdzICk7XG5cdH0sXG5cdGZpbmlzaCA6IGZ1bmN0aW9uIGZpbmlzaCgpe1xuXHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdmaW5pc2hlZCcpO1xuXHRcdGlmKCB0aGlzLm9uRmluaXNoZWQgKXtcblx0XHRcdGlmKCB0eXBlb2YgdGhpcy5vbkZpbmlzaGVkID09PSAnZnVuY3Rpb24nICl7XG5cdFx0XHRcdHRoaXMuaGFuZGxlRnVuY3Rpb24oIHRoaXMub25GaW5pc2hlZCwgdGhpcy5hcmdzICk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuaGFuZGxlQXJyYXkoKTtcblx0XHR9XG5cdH0sXG5cdHN0YXJ0IDogZnVuY3Rpb24gc3RhcnQoKXtcblx0XHR0aGlzLmN1cnJlbnQgPSAwO1xuXHRcdHRoaXMuc2NlbmVzWyB0aGlzLmN1cnJlbnQgXS5zaG93KCk7XG5cdFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoICdzdGFydGVkJyApO1xuXHR9LFxuXHRyZXN0YXJ0OiBmdW5jdGlvbiByZXN0YXJ0KCl7XG5cdFx0dGhpcy5hbnN3ZXJzLnJlc2V0QWxsKCk7XG5cdFx0dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoICdmaW5pc2hlZCcgKTtcblx0XHR0aGlzLnN0YXJ0KCk7XG5cdH0sXG5cdGFkZENhbGxiYWNrVG9TY2VuZTogZnVuY3Rpb24oIHNjZW5lSWR4LCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciBzY2VuZSA9IHRoaXMuc2NlbmVzWyBzY2VuZUlkeCBdO1xuXHRcdHNjZW5lLmFyZ3MgPSBhcmc7XG5cdFx0c2NlbmUuY2FsbGJhY2sgPSBjYWxsYmFjay5iaW5kKCBzY2VuZSApO1xuXHR9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9